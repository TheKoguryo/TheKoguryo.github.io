<!doctype html><html lang=ko><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>3.2 DevOps 서비스의 Blue/Green 배포 전략으로 배포하기 - TheKoguryo's 기술 블로그</title><meta name=generator content="Hugo 0.111.3"><link href=https://thekoguryo.github.io/index.xml rel=alternate type=application/rss+xml><link rel=canonical href=https://thekoguryo.github.io/oracle-cloudnative/devops/2.bluegreen-stragtegy/><link rel=stylesheet href=https://thekoguryo.github.io/css/theme.min.css><link rel=stylesheet href=https://thekoguryo.github.io/css/d2coding.css><link rel=stylesheet href=https://thekoguryo.github.io/css/fontawesome-all.min.css><script src=https://use.fontawesome.com/releases/v5.15.4/js/all.js></script>
<link rel=stylesheet href=https://thekoguryo.github.io/css/chroma.min.css><script src=https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js></script>
<script src=https://thekoguryo.github.io/js/functions.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js></script>
<script src=https://thekoguryo.github.io/js/jquery.backtothetop/jquery.backtothetop.min.js></script>
<script src=https://thekoguryo.github.io/js/jqcloud/jqcloud.js></script>
<link rel=stylesheet href=https://thekoguryo.github.io/js/jqcloud/jqcloud.css><script async src="https://www.googletagmanager.com/gtag/js?id=UA-106207316-1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-106207316-1")</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2708881668962858" crossorigin=anonymous></script><meta property="og:title" content="3.2 DevOps 서비스의 Blue/Green 배포 전략으로 배포하기"><meta property="og:description" content="3.2 DevOps 서비스의 Blue/Green 배포 전략으로 배포하기 DevOps 서비스를 통한 CI/CD 배포 자동화 하기 사전 준비 사항 4.1.1 NGINX Ingress Controller 설치하기을 참조하여 Nginx Ingress Controller를 미리 설치합니"><meta property="og:type" content="article"><meta property="og:url" content="https://thekoguryo.github.io/oracle-cloudnative/devops/2.bluegreen-stragtegy/"><meta property="article:section" content="oracle-cloudnative"><meta property="article:modified_time" content="2022-04-20T00:00:00+00:00"><meta property="og:site_name" content="TheKoguryo's 기술 블로그"></head><body><div class=container><header><h1>TheKoguryo's 기술 블로그</h1><span class=version>Version 2023.02.28</span>
<a href=https://github.com/TheKoguryo class=github><i class="fab fa-github"></i></a></header><div class=menu><nav><ul><li><a href=/>Home</a></li><li><a href=/release-notes>OCI Release Notes</a></li><li><a href=/archives>Archives</a></li><li><a href=/tags>Tag</a></li><li><a href=https://github.com/TheKoguryo/TheKoguryo.github.io/issues/new>Feedback</a></li><li><a href=/link>Link</a></li><li style=float:right><a href=https://thekoguryo.github.io/en/oracle-cloudnative/devops/2.bluegreen-stragtegy/>English</a></li></ul></nav></div><div class=content-container><main><h1 id=32-devops-서비스의-bluegreen-배포-전략으로-배포하기>3.2 DevOps 서비스의 Blue/Green 배포 전략으로 배포하기</h1><h2 id=devops-서비스를-통한-cicd-배포-자동화-하기>DevOps 서비스를 통한 CI/CD 배포 자동화 하기</h2><h3 id=사전-준비-사항>사전 준비 사항</h3><ul><li><a href=../../oss/ingress-controller/1.install-nginx-ingress-controller/>4.1.1 NGINX Ingress Controller 설치하기</a>을 참조하여 Nginx Ingress Controller를 미리 설치합니다.</li></ul><h3 id=devops-프로젝트-만들기>DevOps 프로젝트 만들기</h3><p>이전에 생성한 프로젝트를 그대로 사용하거나, 새롭게 프로젝트를 만듭니다.</p><h3 id=애플리케이션-배포-자동화-하기>애플리케이션 배포 자동화 하기</h3><h4 id=code-repository를-사용하여-애플리케이션-코드-관리하기>Code Repository를 사용하여 애플리케이션 코드 관리하기</h4><p>샘플로 사전에 만든 Nginx 기반 웹앱을 사용하여 만들어 테스트하겠습니다.</p><ol><li><p>코드 저장소 생성을 위해 왼쪽 메뉴에서 <strong>Code Repositories</strong>를 클릭합니다.</p></li><li><p><strong>Create repository</strong>를 클릭하여 저장소를 만듭니다.</p><ul><li>Repository name: 예) oci-devops-oke-webpage</li></ul></li><li><p>실제 개발 작업은 git 명령을 통해 개발 PC에서 진행하면 됩니다. 저장소 상세정보 위에 있는 <strong>Clone</strong> 버튼을 하면 Clone 명령어가 아래 그림처럼 뜨게 됩니다. 여기서는 <strong>Clone with HTTPS</strong>를 사용하겠습니다.</p></li><li><p>개발 PC에 복사한 주소를 사용해 git clone 명령어를 통해 복제합니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git clone &lt;YourClonewithHTTPS URL&gt;
</span></span></code></pre></div></li><li><p>이때 사용자 인증이 필요합니다. HTTPS기반 사용자 인증시 아래 유저명 형식과 AuthToken을 사용합니다.</p></li><li><p>이미 개발된 소스를 가져와 Clone한 저장소로 옮깁니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>wget https://github.com/TheKoguryo/oci-devops-oke-webpage/archive/refs/tags/v2022.04.tar.gz
</span></span><span class=line><span class=cl>tar -xvzf v2022.04.tar.gz --strip-components<span class=o>=</span><span class=m>1</span> -C oci-devops-oke-webpage/
</span></span></code></pre></div></li><li><p>코드를 Code Repository에 Push 합니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> oci-devops-oke-webpage
</span></span><span class=line><span class=cl>git add .
</span></span><span class=line><span class=cl>git commit -m <span class=s2>&#34;init&#34;</span>
</span></span><span class=line><span class=cl>git push
</span></span></code></pre></div></li><li><p>코드 작성 및 반영 완료</p><ul><li>Dockerfile, default.conf.template, html 폴더: nginx 기반 웹 앱의 이미지를 빌드 소스 파일입니다.</li><li>build_spec.yaml: DevOps 서비의 빌드 스테이지에서 사용하는 빌드 정의서입니다.</li><li>oci-oke-deployment.yaml: OKE에 배포하기 위해 정의된 Kubernetes Manifest 파일입니다. 이후 다시 설명하겠습니다.</li></ul><p><img class=img-fluid1 src=../images/image-20220420164127962.png alt=image-20220420164127962 onerror='this.onerror=null,this.src="images/image-20220420164127962.png"'></p></li></ol><h4 id=build-pipeline-만들기>Build Pipeline 만들기</h4><p>CI/CD 중에 코드를 빌드하여 배포 산출물을 만드는 CI 과정에 해당되는 부분을 Build Pipeline을 통해 구성이 가능합니다.</p><ol><li><p><strong>프로젝트 페이지</strong>로 이동하여 왼쪽 메뉴의 <strong>Build Pipelines</strong>로 이동합니다.</p></li><li><p><strong>Create build pipeline</strong>을 클릭하여 파이프라인을 생성합니다.</p><ul><li>Name: 예) webpage-build-pipeline</li></ul></li><li><p>생성된 파이프라인을 클릭합니다.</p></li><li><p>그림과 같이 Stage를 추가하여 파이프라인 흐름을 구성할 수 있습니다. <strong>Add Stage</strong>를 클릭합니다.</p></li></ol><h5 id=build-stage-만들기>Build Stage 만들기</h5><ol><li><p>빌드를 위해 먼저 <strong>Managed Build</strong> Stage를 추가합니다.</p></li><li><p>Managed Build Stage 설정</p><ul><li><p><strong>Stage name</strong>: 예) build-stage</p></li><li><p><strong>Build Spec File Path</strong>: 빌드 스크립트 경로를 지정합니다. 기본적으로 소스 루트에 있는 build_spec.yaml을 파일을 사용합니다.</p></li><li><p><strong>Primary Code Repository</strong>: 빌드할 메인 소스가 있는 코드 저장소를 지정합니다.</p><ul><li><p>대상 소스 코드가 있는 저장소를 지정합니다.</p><p><img class=img-fluid1 src=../images/image-20220420165218490.png alt=image-20220420165218490 onerror='this.onerror=null,this.src="images/image-20220420165218490.png"'></p></li></ul></li></ul></li><li><p>설정된 Stage를 <strong>Add</strong>를 클릭하여 추가합니다.</p></li><li><p>테스트처럼 소스 코드상의 Build Spec의 정의가 필요합니다.</p><ul><li><p>개발한 oci-devops-oke-webpage 소스 코드의 root 경로에 build_spec.yaml을 이미 정의해 두었습니다. 정의한 내용을 확인합니다.</p></li><li><p>build_spec.yaml</p><ul><li>outputArtifacts.output-image: 빌드 산출물인 컨테이너 이미지를 지칭합니다.</li><li>outputArtifacts.output-oci-oke-deployment: 빌드 산출물로 소스코드상에 있는 OKE 배포용 Manifest 파일입니다.</li><li>exportedVariables<ul><li>IMAGE_PATH: 빌드되는 환경정보와, APP_NAME을 기반으로 OCIR 리파지토리를 계산합니다.</li><li>TAG: 편의를 위해 코드 Commit ID 또는 BUILD_ID 해쉬값으로 지정합니다.</li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>0.1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>component</span><span class=p>:</span><span class=w> </span><span class=l>build</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>timeoutInSeconds</span><span class=p>:</span><span class=w> </span><span class=m>6000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>runAs</span><span class=p>:</span><span class=w> </span><span class=l>root</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>shell</span><span class=p>:</span><span class=w> </span><span class=l>bash</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># these are local variables to the build config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>variables</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>defaultAppName</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;webpage&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>defaultContextPath</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;/webpage&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># the value of a vaultVariable is the secret-id (in OCI ID format) stored in the OCI Vault service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># you can then access the value of that secret in your build_spec.yaml commands</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>vaultVariables</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># exportedVariables are made available to use as parameters in sucessor Build Pipeline stages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=c># For this Build to run, the Build Pipeline needs to have a BUILDRUN_HASH parameter set</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>exportedVariables</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>BUILDRUN_HASH</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>APP_NAME</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>IMAGE_PATH</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>TAG</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>CONTEXT_PATH</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># Its a native way to fetch artifacts from external or artifact repo or a file path to use before a stage.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># More about buildspec formats - https://docs.oracle.com/en-us/iaas/Content/devops/using/build_specs.htm</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>inputArtifacts</span><span class=p>:</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>Command</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Init exportedVariables&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>timeoutInSeconds</span><span class=p>:</span><span class=w> </span><span class=m>30</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>      APP_NAME=$defaultAppName
</span></span></span><span class=line><span class=cl><span class=sd>      CONTEXT_PATH=$defaultContextPath
</span></span></span><span class=line><span class=cl><span class=sd>      echo $APP_NAME
</span></span></span><span class=line><span class=cl><span class=sd>      echo $CONTEXT_PATH</span><span class=w>      
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>Command</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Build Source&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>timeoutInSeconds</span><span class=p>:</span><span class=w> </span><span class=m>4000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>      echo no action</span><span class=w>      
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>Command</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Define Image Tag - Commit ID&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>timeoutInSeconds</span><span class=p>:</span><span class=w> </span><span class=m>30</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>      COMMIT_ID=`echo ${OCI_TRIGGER_COMMIT_HASH} | cut -c 1-7`
</span></span></span><span class=line><span class=cl><span class=sd>      BUILDRUN_HASH=`echo ${OCI_BUILD_RUN_ID} | rev | cut -c 1-7`
</span></span></span><span class=line><span class=cl><span class=sd>      [ -z &#34;$COMMIT_ID&#34; ] &amp;&amp; TAG=$BUILDRUN_HASH || TAG=$COMMIT_ID</span><span class=w>      
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>Command</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Define Image Path&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>timeoutInSeconds</span><span class=p>:</span><span class=w> </span><span class=m>30</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>      TENANCY_NAMESPACE=`oci os ns get --query data --raw-output`
</span></span></span><span class=line><span class=cl><span class=sd>      REPO_NAME=$APP_NAME
</span></span></span><span class=line><span class=cl><span class=sd>      IMAGE_PATH=$OCI_RESOURCE_PRINCIPAL_REGION.ocir.io/$TENANCY_NAMESPACE/$REPO_NAME</span><span class=w>      
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>Command</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>timeoutInSeconds</span><span class=p>:</span><span class=w> </span><span class=m>1200</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Build Container Image&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>      cd ${OCI_PRIMARY_SOURCE_DIR}
</span></span></span><span class=line><span class=cl><span class=sd>      docker build --pull --rm -t new-generated-image . --build-arg CONTEXT_PATH=$CONTEXT_PATH</span><span class=w>      
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>Command</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Check exportedVariables&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>timeoutInSeconds</span><span class=p>:</span><span class=w> </span><span class=m>30</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=l>|  </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>[</span><span class=w> </span>-<span class=l>z &#34;$APP_NAME&#34; ] &amp;&amp; APP_NAME=unknown          </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>[</span><span class=w> </span>-<span class=l>z &#34;$IMAGE_PATH&#34; ] &amp;&amp; IMAGE_PATH=unknown    </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=p>[</span><span class=w> </span>-<span class=l>z &#34;$TAG&#34; ] &amp;&amp; TAG=unknown</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=l>echo &#34;APP_NAME: &#34; $APP_NAME      </span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=l>echo &#34;IMAGE_PATH: &#34; $IMAGE_PATH</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=l>echo &#34;TAG: &#34; $TAG</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>outputArtifacts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>output-image</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>DOCKER_IMAGE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># this location tag doesn&#39;t effect the tag used to deliver the container image</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># to the Container Registry</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>location</span><span class=p>:</span><span class=w> </span><span class=l>new-generated-image</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>output-oci-oke-deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>BINARY</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>location</span><span class=p>:</span><span class=w> </span><span class=l>${OCI_PRIMARY_SOURCE_DIR}/oci-oke-deployment.yaml      </span><span class=w>
</span></span></span></code></pre></div></li></ul></li><li><p>빌드 스테이지가 완성되었습니다.</p></li></ol><h5 id=빌드-산출물을-저장할-artifact-저장소-만들기>빌드 산출물을 저장할 Artifact 저장소 만들기</h5><ol><li>좌측 상단 햄버거 메뉴에서 <strong>Developer Services</strong> > <strong>Containers & Artifacts</strong> > <strong>Artifact Registry</strong>로 이동합니다.</li><li><strong>Create repository</strong>를 클릭하여 저장소를 추가합니다.<ul><li>Name: 예) oci-hol-artifact-repository</li><li>Immutable artifacts: 테스트용으로 체크 해제</li></ul></li></ol><h5 id=빌드-산출물을-ocir-및-artifact-저장소에-저장하기>빌드 산출물을 OCIR 및 Artifact 저장소에 저장하기</h5><ol><li><p>Build Pipeline 탭으로 이동합니다.</p></li><li><p>플러스 버튼을 클릭하여 build-stage 다음에 stage를 추가합니다.</p></li><li><p><strong>Delivery Artifact</strong> Stage를 선택합니다.</p></li><li><p>stage 이름을 입력하고 Create Artifact를 선택합니다.</p><p><img class=img-fluid1 src=../images/image-20220420171453459.png alt=image-20220420171453459 onerror='this.onerror=null,this.src="images/image-20220420171453459.png"'></p></li><li><p>Container image 유형으로 Artifact 추가합니다.</p><ul><li><p>이미지 경로: docker tag를 달때 사용하는 이미지 경로입니다. 직접 입력해도 되지만 여기서는 build-stage에서 넘어온 exportedVariable을 사용하여 아래와 같이 입력합니다.</p><ul><li>Name: generated_image_with_tag</li><li>Image Path: ${IMAGE_PATH}:${TAG}</li></ul><p><img class=img-fluid1 src=../images/image-20220420171635825.png alt=image-20220420171635825 onerror='this.onerror=null,this.src="images/image-20220420171635825.png"'></p></li></ul></li><li><p>같은 방식으로 하나 더 추가 합니다.</p><ul><li>Name: generated_image_with_latest</li><li>Image Path: ${IMAGE_PATH}:latest</li></ul></li><li><p>Kubernetes Manifest 파일을 앞서 생성한 Artifact Repository에 추가합니다.</p><ul><li><p>Name: 예) oci-oke-deployment.yaml</p></li><li><p>Artifact path: oci-devops-oke-webpage/oci-oke-deployment.yaml</p></li><li><p>Version: ${BUILDRUN_HASH}</p><p><img class=img-fluid1 src=../images/image-20220420184107716.png alt=image-20220420184107716 onerror='this.onerror=null,this.src="images/image-20220420184107716.png"'></p></li></ul></li><li><p>Artifact 매핑</p><ul><li><p>Associate Artifact에서 방금 추가한 3개의 Artifact에 실제 컨테이너 이미지 파일을 매핑해 줍니다. 앞서 build-stage에서 build_spec.yaml에서 정의한 outputArtifacts의 이름을 입력합니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>outputArtifacts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>output-image</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>DOCKER_IMAGE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># this location tag doesn&#39;t effect the tag used to deliver the container image</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c># to the Container Registry</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>location</span><span class=p>:</span><span class=w> </span><span class=l>new-generated-image</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>output-oci-oke-deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>BINARY</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>location</span><span class=p>:</span><span class=w> </span><span class=l>${OCI_PRIMARY_SOURCE_DIR}/oci-oke-deployment.yaml  </span><span class=w>
</span></span></span></code></pre></div><p><img class=img-fluid1 src=../images/image-20220421102046463.png alt=image-20220421102046463 onerror='this.onerror=null,this.src="images/image-20220421102046463.png"'></p></li></ul></li><li><p>이제 delivery stage까지 추가하였습니다.</p></li></ol><h4 id=bluegreen-deployment-pipeline-만들기>Blue/Green Deployment Pipeline 만들기</h4><p>CI/CD 중에 빌드된 산출물을 가지고 실제 서버에 배포하는 CD 과정에 해당되는 부분을 Deployment Pipeline을 통해 구성이 가능합니다.</p><p>Blue/Green 전략으로 쿠버네티스에 배포하기 위해서는 배포 환경, 배포할 Kubernetes Manifest 파일, 배포에 사용될 Kubernetes Namespace 두 개가 필요합니다.</p><h5 id=kubernetes-environment-등록하기>Kubernetes Environment 등록하기</h5><ol><li>앞서 등록한 OKE 환경이 없는 경우, <strong>프로젝트 페이지</strong>로 이동하여 왼쪽 메뉴의 <strong>Environments</strong>로 이동하여 배포할 OKE 환경을 등록합니다.</li></ol><h5 id=kubernetes에-배포할-manifest-파일-준비>Kubernetes에 배포할 manifest 파일 준비</h5><ol><li><p>Kubernetes에 배포할 Stage 유형을 사용하기 위해서는 사전에 배포할 manifest yaml 파일을 준비해야 합니다.</p></li><li><p>앞서 실습과 같이 inline 형식으로 하는 방법도 있고, 이번에서 앞서 가져온 소스 프로젝트 파일에 Kubernetes Manifest 파일을 관리하고 사용할 수도 있습니다.</p><ul><li><p>사용할 샘플 Manifest 파일</p><ul><li>Deployment, Service: 빌드된 컨테이너 앱을 배포할 Deployment와 Cluster IP기반 Service</li><li>Ingress: Blue/Green 또는 Canary 배포를 위해 필요합니다. 둘다 Nginx Ingress Controller를 기반으로 라우팅 규칙을 조절하여 해당 기능을 제공하고 있습니다.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>${APP_NAME}-deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>${APP_NAME}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>${APP_NAME}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>${APP_NAME}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># enter the path to your image, be sure to include the correct region prefix</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>${IMAGE_PATH}:${TAG}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>imagePullPolicy</span><span class=p>:</span><span class=w> </span><span class=l>Always</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>containerPort</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class=l>TCP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>readinessProbe</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>exec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>command</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>cat</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c># For demo, see the start status easily about rolling updates.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>initialDelaySeconds</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>periodSeconds</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>livenessProbe</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>exec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>command</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span>- <span class=l>cat</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>initialDelaySeconds</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>periodSeconds</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>POD_NAMESPACE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>valueFrom</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>fieldRef</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=nt>fieldPath</span><span class=p>:</span><span class=w> </span><span class=l>metadata.namespace</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>${APP_NAME}-service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>ClusterIP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>8080</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class=l>TCP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>targetPort</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>${APP_NAME}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>networking.k8s.io/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Ingress</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>${APP_NAME}-ingress</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>annotations</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>kubernetes.io/ingress.class</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;nginx&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>nginx.ingress.kubernetes.io/rewrite-target</span><span class=p>:</span><span class=w> </span><span class=l>/$2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>rules</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>paths</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>${CONTEXT_PATH}(/|$)(.*)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>pathType</span><span class=p>:</span><span class=w> </span><span class=l>Prefix</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>backend</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>${APP_NAME}-service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>port</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>number</span><span class=p>:</span><span class=w> </span><span class=m>8080</span><span class=w>
</span></span></span></code></pre></div></li></ul></li></ol><h5 id=kubernetes에-배포할-네임스페이스-만들기>Kubernetes에 배포할 네임스페이스 만들기</h5><p>블루 앱이 배포될 네임스페이스, 그린 앱이 배포될 네임스페이스 필요합니다. 각 네임스페이스에 동일한 앱이 현재 버전, 신규 버전이 각각 배포되게 되고, 라우팅 설정을 통해 트래픽을 조절합니다.</p><ol><li><p>Cloud Shell을 통해 kubectl 명령이 실행 가능한 환경으로 접속합니다.</p></li><li><p>두 개의 네임스페이스를 생성합니다.</p><ul><li><p>예) ns-blue, ns-green</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>kubectl create ns ns-blue
</span></span><span class=line><span class=cl>kubectl create ns ns-green
</span></span></code></pre></div></li></ul></li><li><p>OCIR에서 이미지 가져오기</p><blockquote><p>OCIR 리파지토지(예시, webpage)가 사전에 없는 경우 Root Compartment에 Private 형태로 만들어집니다. OKE에서 가져오기 위해서는 각각 네임스페이스에 imagepullsecret을 사전에 생성하거나, 리파지토리를 미리 Public으로 생성합니다.</p></blockquote></li></ol><h5 id=bluegreen-전략으로-kubernetes-배포-stage-만들기>Blue/Green 전략으로 Kubernetes 배포 Stage 만들기</h5><ol><li><p><strong>프로젝트 페이지</strong>로 이동하여 왼쪽 메뉴의 <strong>Deployment Pipelines</strong>로 이동합니다.</p></li><li><p><strong>Create pipeline</strong>을 클릭하여 파이프라인을 생성합니다.</p><ul><li>Name: 예) webpage-bluegreen-deployment-pipeline</li></ul></li><li><p>생성된 파이프라인을 클릭하여 <strong>Blue/Green Strategy</strong> Stage를 추가합니다.</p><p><img class=img-fluid1 src=../images/image-20220420185718429.png alt=image-20220420185718429 onerror='this.onerror=null,this.src="images/image-20220420185718429.png"'></p></li><li><p>배포 유형을 OKE로 선택하고, 배포환경 및 manifest 파일을 선택합니다.</p></li><li><p>Blue/Green 배포를 위한 추가 설정을 합니다.</p><ul><li><p><strong>Namespace set</strong>: 앞서 만들 배포용 네임스페이스 2개를 입력합니다. 이전 버전이 있는 곳에 배포하고, 현재 버전으로 향한 트래픽을 새 버전이 있는 곳으로 변경하는 방식으로 2개의 순서는 크게 중요하지는 않습니다.</p><ul><li>예) ns-blue, ns-green</li></ul></li><li><p><strong>NGINX ingress namespace</strong>: 배포 manifest 파일에서 정의한 배포 앱의 ingress 자원 이름을 입력합니다.</p></li></ul><p><img class=img-fluid1 src=../images/image-20220421094407123.png alt=image-20220421094407123 onerror='this.onerror=null,this.src="images/image-20220421094407123.png"'></p></li><li><p>옵션 설정: Approval controls을 활성화합니다. 배포까지만 자동으로 진행하고, 승인후 트래픽을 전환하기 위해 추가합니다. 트래픽 전환 스위치 정도라고 생각하면 될 것 같습니다.</p><ul><li><p>Approval controls:</p><ul><li>Name: 예) approval-stage</li></ul><p><img class=img-fluid1 src=../images/image-20220421094756223.png alt=image-20220421094756223 onerror='this.onerror=null,this.src="images/image-20220421094756223.png"'></p></li></ul></li><li><p>파이프라인 완성</p><p><img class=img-fluid1 src=../images/image-20220421094951551.png alt=image-20220421094951551 onerror='this.onerror=null,this.src="images/image-20220421094951551.png"'></p></li></ol><h4 id=build-pipeline에서-deployment-pipeline-호출하기>Build Pipeline에서 Deployment Pipeline 호출하기</h4><p>앞서 만든 Build Pipeline이 끝나고, 배포가 될수 있도록 Deployment Pipeline 호출을 추가합니다.</p><ol><li><p>앞서 만든 <strong>Build Pipelines</strong>으로 이동합니다.</p></li><li><p>파이프라인 마지막에 Stage를 추가합니다.</p></li><li><p><strong>Trigger Deployment</strong> 유형을 선택합니다.</p></li><li><p>앞서 만든 Blue/Green 배포용 Deployment Pipeline을 지정합니다.</p></li><li><p>빌드후 배포하는 전체 흐름이 완료되었습니다.</p></li></ol><h4 id=trigger-설정하기>Trigger 설정하기</h4><p>개발자가 코드를 코드 저장소에 반영이 될 때 자동으로 빌드, 배포 파이프라인이 동작할 필요가 있습니다. Trigger는 코드 저장소에 발생한 이벤트를 통해 빌드 파이프라인을 시작하게 하는 역할을 하게 됩니다.</p><ol><li><p><strong>프로젝트 페이지</strong>로 이동하여 왼쪽 메뉴의 <strong>Trigger</strong>로 이동합니다.</p></li><li><p><strong>Create trigger</strong>을 클릭합니다.</p></li><li><p>Trigger를 설정합니다.</p><ul><li><strong>Name</strong>: 예) webpage-build-pipeline-trigger</li><li><strong>Source Code Repository</strong>: 앞서 만든 OCI Code Repository상의 oci-devops-oke-webpage를 선택합니다.</li><li><strong>Actions</strong>: 트리거링 되었을 때 호출하는 액션으로 작성한 빌드 파이프라인인 webpage-pipeline을 선택합니다.</li></ul></li><li><p>설정이 완료되었습니다.</p></li></ol><h4 id=테스트---blue-배포>테스트 - Blue 배포</h4><ol><li><p>Trigger에서 지정한 oci-devops-oke-webpage 소스 코드에 임의의 변경사항을 발생시키고 Code Repository에 반영합니다.</p></li><li><p>작업중인 코드가 있는 Cloud Shell로 이동합니다.</p></li><li><p>html/index.html을 변경해도 되지만, 편의상 환경변수로 해놓은 Dockerfile을 변경합니다.</p></li><li><p>현재 설정 기준으로 변경사항을 발생시키고 코드를 Commit 후 Push 합니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>FROM nginx:alpine
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>COPY default.conf.template /etc/nginx/templates/
</span></span><span class=line><span class=cl>COPY html/ /usr/share/nginx/html/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ENV <span class=nv>POD_NAMESPACE</span><span class=o>=</span><span class=s2>&#34;default&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ENV <span class=nv>VERSION</span><span class=o>=</span><span class=s2>&#34;1.0&#34;</span>
</span></span><span class=line><span class=cl>ENV <span class=nv>MESSAGE</span><span class=o>=</span><span class=s2>&#34;Hello OCI DevOps&#34;</span>
</span></span><span class=line><span class=cl>ENV <span class=nv>BACKGROUND</span><span class=o>=</span><span class=s2>&#34;blue&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ARG <span class=nv>CONTEXT_PATH</span><span class=o>=</span><span class=s2>&#34;/webpage&#34;</span>
</span></span><span class=line><span class=cl>ENV <span class=nv>CONTEXT_PATH</span><span class=o>=</span><span class=nv>$CONTEXT_PATH</span>
</span></span></code></pre></div></li><li><p>Trigger가 되고 빌드가 시작됩니다.</p><p><img class=img-fluid1 src=../images/image-20220421102411179.png alt=image-20220421102411179 onerror='this.onerror=null,this.src="images/image-20220421102411179.png"'></p></li><li><p>빌드가 성공하고, 배포 파이프라인이 실행하다, approval-stage에서 대기합니다.</p><p><img class=img-fluid1 src=../images/image-20220421102841459.png alt=image-20220421102841459 onerror='this.onerror=null,this.src="images/image-20220421102841459.png"'></p></li><li><p>쿠버네티스 배포 상태를 확인합니다. ns-blue에만 배포된 것을 알 수 있습니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>opc@jumpbox-945115 ~<span class=o>]</span>$ kubectl get all,ingress -n ns-blue
</span></span><span class=line><span class=cl>NAME                                      READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>pod/webpage-deployment-6fbfd769c7-gqprs   1/1     Running   <span class=m>0</span>          9m28s
</span></span><span class=line><span class=cl>pod/webpage-deployment-6fbfd769c7-m4lk4   1/1     Running   <span class=m>0</span>          9m28s
</span></span><span class=line><span class=cl>pod/webpage-deployment-6fbfd769c7-z924h   1/1     Running   <span class=m>0</span>          9m28s
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                      TYPE        CLUSTER-IP      EXTERNAL-IP   PORT<span class=o>(</span>S<span class=o>)</span>    AGE
</span></span><span class=line><span class=cl>service/webpage-service   ClusterIP   10.96.166.161   &lt;none&gt;        8080/TCP   9m28s
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                                 READY   UP-TO-DATE   AVAILABLE   AGE
</span></span><span class=line><span class=cl>deployment.apps/webpage-deployment   3/3     <span class=m>3</span>            <span class=m>3</span>           9m28s
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                                            DESIRED   CURRENT   READY   AGE
</span></span><span class=line><span class=cl>replicaset.apps/webpage-deployment-6fbfd769c7   <span class=m>3</span>         <span class=m>3</span>         <span class=m>3</span>       9m28s
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                                        CLASS    HOSTS   ADDRESS          PORTS   AGE
</span></span><span class=line><span class=cl>ingress.networking.k8s.io/webpage-ingress   &lt;none&gt;   *       146.56.118.147   <span class=m>80</span>      9m28s
</span></span><span class=line><span class=cl><span class=o>[</span>opc@jumpbox-945115 ~<span class=o>]</span>$ kubectl get all,ingress -n ns-green
</span></span><span class=line><span class=cl>No resources found in ns-green namespace.
</span></span></code></pre></div></li><li><p>실행중인 배포 파이프라인으로 돌아가 approval-stage에서 승인합니다.</p><p><img class=img-fluid1 src=../images/image-20220421103948397.png alt=image-20220421103948397 onerror='this.onerror=null,this.src="images/image-20220421103948397.png"'></p><p><img class=img-fluid1 src=../images/image-20220421104100911.png alt=image-20220421104100911 onerror='this.onerror=null,this.src="images/image-20220421104100911.png"'></p></li><li><p>승인이 되면 Traffic Shift도 진행되어 ns-green에도 ingress가 배포된 것을 볼수 있습니다. 그러나 지금은 ns-blue가 Active이므로 ns-green에 있는 webpage-ingress의 annotations에서 보면 <strong>canary-weight:</strong> &ldquo;<strong>0</strong>&ldquo;이 되어는 실제는 ns-green으로는 요청이 가지 않습니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>opc@jumpbox-945115 ~<span class=o>]</span>$ kubectl get all,ingress -n ns-green
</span></span><span class=line><span class=cl>NAME                                        CLASS    HOSTS   ADDRESS          PORTS   AGE
</span></span><span class=line><span class=cl>ingress.networking.k8s.io/webpage-ingress   &lt;none&gt;   *       146.56.118.147   <span class=m>80</span>      4m
</span></span><span class=line><span class=cl><span class=o>[</span>opc@jumpbox-945115 ~<span class=o>]</span>$ kubectl get ingress webpage-ingress -n ns-green -o yaml
</span></span><span class=line><span class=cl>apiVersion: networking.k8s.io/v1
</span></span><span class=line><span class=cl>kind: Ingress
</span></span><span class=line><span class=cl>metadata:
</span></span><span class=line><span class=cl>  annotations:
</span></span><span class=line><span class=cl>    kubernetes.io/ingress.class: nginx
</span></span><span class=line><span class=cl>    nginx.ingress.kubernetes.io/canary: <span class=s2>&#34;true&#34;</span>
</span></span><span class=line><span class=cl>    nginx.ingress.kubernetes.io/canary-by-header: redirect-to-namespaceB
</span></span><span class=line><span class=cl>    nginx.ingress.kubernetes.io/canary-weight: <span class=s2>&#34;0&#34;</span>
</span></span><span class=line><span class=cl>    nginx.ingress.kubernetes.io/rewrite-target: /<span class=nv>$2</span>
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div></li><li><p>Ingress 주소를 통해 웹페이지에 접속하면, 현재 Blue 앱이 잘 동작하는 것을 볼수 있습니다.</p><ul><li>주소 예) http://146.56.118.147/webpage</li></ul><p><img class=img-fluid1 src=../images/image-20220421105020566.png alt=image-20220421105020566 onerror='this.onerror=null,this.src="images/image-20220421105020566.png"'></p></li></ol><h4 id=테스트---green-배포>테스트 - Green 배포</h4><ol><li><p>소스로 돌아가서 코드를 변경(예시, Dockerfile의 환경변수 변경)하고 Commit & Push 하여 코드를 반영합니다</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>FROM nginx:alpine
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>COPY default.conf.template /etc/nginx/templates/
</span></span><span class=line><span class=cl>COPY html/ /usr/share/nginx/html/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ENV <span class=nv>POD_NAMESPACE</span><span class=o>=</span><span class=s2>&#34;default&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ENV <span class=nv>VERSION</span><span class=o>=</span><span class=s2>&#34;1.1&#34;</span>
</span></span><span class=line><span class=cl>ENV <span class=nv>MESSAGE</span><span class=o>=</span><span class=s2>&#34;Hello OCI DevOps&#34;</span>
</span></span><span class=line><span class=cl>ENV <span class=nv>BACKGROUND</span><span class=o>=</span><span class=s2>&#34;green&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ARG <span class=nv>CONTEXT_PATH</span><span class=o>=</span><span class=s2>&#34;/webpage&#34;</span>
</span></span><span class=line><span class=cl>ENV <span class=nv>CONTEXT_PATH</span><span class=o>=</span><span class=nv>$CONTEXT_PATH</span>
</span></span></code></pre></div></li><li><p>다시 빌드, 배포 파이프라인이 실행되고 approval-stage에서 멈출때까지 기다립니다.</p></li><li><p>쿠버네티스 배포 상태를 확인합니다. ns-green에 앱이 배포된 것을 볼 수 있습니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>opc@jumpbox-945115 ~<span class=o>]</span>$ kubectl get all,ingress -n ns-blue
</span></span><span class=line><span class=cl>NAME                                      READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>pod/webpage-deployment-6fbfd769c7-gqprs   1/1     Running   <span class=m>0</span>          34m
</span></span><span class=line><span class=cl>pod/webpage-deployment-6fbfd769c7-m4lk4   1/1     Running   <span class=m>0</span>          34m
</span></span><span class=line><span class=cl>pod/webpage-deployment-6fbfd769c7-z924h   1/1     Running   <span class=m>0</span>          34m
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                      TYPE        CLUSTER-IP      EXTERNAL-IP   PORT<span class=o>(</span>S<span class=o>)</span>    AGE
</span></span><span class=line><span class=cl>service/webpage-service   ClusterIP   10.96.166.161   &lt;none&gt;        8080/TCP   34m
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                                 READY   UP-TO-DATE   AVAILABLE   AGE
</span></span><span class=line><span class=cl>deployment.apps/webpage-deployment   3/3     <span class=m>3</span>            <span class=m>3</span>           34m
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                                            DESIRED   CURRENT   READY   AGE
</span></span><span class=line><span class=cl>replicaset.apps/webpage-deployment-6fbfd769c7   <span class=m>3</span>         <span class=m>3</span>         <span class=m>3</span>       34m
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                                        CLASS    HOSTS   ADDRESS          PORTS   AGE
</span></span><span class=line><span class=cl>ingress.networking.k8s.io/webpage-ingress   &lt;none&gt;   *       146.56.118.147   <span class=m>80</span>      34m
</span></span><span class=line><span class=cl><span class=o>[</span>opc@jumpbox-945115 ~<span class=o>]</span>$ kubectl get all,ingress -n ns-green
</span></span><span class=line><span class=cl>NAME                                      READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>pod/webpage-deployment-75c8bb6ffc-5b497   1/1     Running   <span class=m>0</span>          98s
</span></span><span class=line><span class=cl>pod/webpage-deployment-75c8bb6ffc-m8dl4   1/1     Running   <span class=m>0</span>          98s
</span></span><span class=line><span class=cl>pod/webpage-deployment-75c8bb6ffc-xctr4   1/1     Running   <span class=m>0</span>          98s
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                      TYPE        CLUSTER-IP     EXTERNAL-IP   PORT<span class=o>(</span>S<span class=o>)</span>    AGE
</span></span><span class=line><span class=cl>service/webpage-service   ClusterIP   10.96.153.34   &lt;none&gt;        8080/TCP   98s
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                                 READY   UP-TO-DATE   AVAILABLE   AGE
</span></span><span class=line><span class=cl>deployment.apps/webpage-deployment   3/3     <span class=m>3</span>            <span class=m>3</span>           98s
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                                            DESIRED   CURRENT   READY   AGE
</span></span><span class=line><span class=cl>replicaset.apps/webpage-deployment-75c8bb6ffc   <span class=m>3</span>         <span class=m>3</span>         <span class=m>3</span>       98s
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                                        CLASS    HOSTS   ADDRESS          PORTS   AGE
</span></span><span class=line><span class=cl>ingress.networking.k8s.io/webpage-ingress   &lt;none&gt;   *       146.56.118.147   <span class=m>80</span>      18m
</span></span></code></pre></div></li><li><p>웹페이지에 접속하면, 여전히 Blue 앱으로 접속됩니다.</p></li><li><p>실행중인 배포 파이프라인으로 돌아가 approval-stage에서 승인합니다.</p></li><li><p>승인이 되면, Traffic Shift가 됩니다. 이제 ns-green이 Active이므로 ns-green내 webpage-ingress의 annotations에서 보면 <strong>canary-weight:</strong> &ldquo;<strong>100</strong>&ldquo;으로 변경된 걸 볼 수 있습니다. 이제 모든 요청은 ns-green으로만 전달됩니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>opc@jumpbox-945115 ~<span class=o>]</span>$ kubectl get ingress webpage-ingress -n ns-green -o yaml
</span></span><span class=line><span class=cl>apiVersion: networking.k8s.io/v1
</span></span><span class=line><span class=cl>kind: Ingress
</span></span><span class=line><span class=cl>metadata:
</span></span><span class=line><span class=cl>  annotations:
</span></span><span class=line><span class=cl>    kubernetes.io/ingress.class: nginx
</span></span><span class=line><span class=cl>    nginx.ingress.kubernetes.io/canary: <span class=s2>&#34;true&#34;</span>
</span></span><span class=line><span class=cl>    nginx.ingress.kubernetes.io/canary-by-header: redirect-to-namespaceB
</span></span><span class=line><span class=cl>    nginx.ingress.kubernetes.io/canary-weight: <span class=s2>&#34;100&#34;</span>
</span></span><span class=line><span class=cl>    nginx.ingress.kubernetes.io/rewrite-target: /<span class=nv>$2</span>
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div></li><li><p>웹페이지에 접속하면, Green 앱으로 접속됩니다. 여러번 반복해서 요청해도 Green 앱으로 접속됩니다.</p><p><img class=img-fluid1 src=../images/image-20220421110959032.png alt=image-20220421110959032 onerror='this.onerror=null,this.src="images/image-20220421110959032.png"'></p></li></ol><h4 id=테스트---추가적인-변경-사항-배포---red-배포>테스트 - 추가적인 변경 사항 배포 - Red 배포</h4><ol><li><p>소스로 돌아가서 코드를 변경(예시, Dockerfile의 환경변수 변경)하고 Commit & Push 하여 코드를 반영합니다</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>ENV <span class=nv>VERSION</span><span class=o>=</span><span class=s2>&#34;1.2&#34;</span>
</span></span><span class=line><span class=cl>ENV <span class=nv>MESSAGE</span><span class=o>=</span><span class=s2>&#34;Hello OCI DevOps&#34;</span>
</span></span><span class=line><span class=cl>ENV <span class=nv>BACKGROUND</span><span class=o>=</span><span class=s2>&#34;red&#34;</span>
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div></li><li><p>다시 빌드, 배포 파이프라인이 실행되고 approval-stage에서 멈출때까지 기다립니다.</p></li><li><p>쿠버네티스 배포 상태를 확인합니다. POD의 AGE를 보면 신규 배포가 ns-blue로 된 것을 알 수 있습니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>opc@jumpbox-945115 ~<span class=o>]</span>$ kubectl get all,ingress -n ns-blue
</span></span><span class=line><span class=cl>NAME                                      READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>pod/webpage-deployment-7958d6b7b7-pkzmm   1/1     Running   <span class=m>0</span>          115s
</span></span><span class=line><span class=cl>pod/webpage-deployment-7958d6b7b7-vwx22   1/1     Running   <span class=m>0</span>          2m4s
</span></span><span class=line><span class=cl>pod/webpage-deployment-7958d6b7b7-wkbjd   1/1     Running   <span class=m>0</span>          107s
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                      TYPE        CLUSTER-IP      EXTERNAL-IP   PORT<span class=o>(</span>S<span class=o>)</span>    AGE
</span></span><span class=line><span class=cl>service/webpage-service   ClusterIP   10.96.166.161   &lt;none&gt;        8080/TCP   53m
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                                 READY   UP-TO-DATE   AVAILABLE   AGE
</span></span><span class=line><span class=cl>deployment.apps/webpage-deployment   3/3     <span class=m>3</span>            <span class=m>3</span>           53m
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                                            DESIRED   CURRENT   READY   AGE
</span></span><span class=line><span class=cl>replicaset.apps/webpage-deployment-6fbfd769c7   <span class=m>0</span>         <span class=m>0</span>         <span class=m>0</span>       53m
</span></span><span class=line><span class=cl>replicaset.apps/webpage-deployment-7958d6b7b7   <span class=m>3</span>         <span class=m>3</span>         <span class=m>3</span>       2m4s
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                                        CLASS    HOSTS   ADDRESS          PORTS   AGE
</span></span><span class=line><span class=cl>ingress.networking.k8s.io/webpage-ingress   &lt;none&gt;   *       146.56.118.147   <span class=m>80</span>      53m
</span></span><span class=line><span class=cl><span class=o>[</span>opc@jumpbox-945115 ~<span class=o>]</span>$ kubectl get all,ingress -n ns-green
</span></span><span class=line><span class=cl>NAME                                      READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>pod/webpage-deployment-75c8bb6ffc-5b497   1/1     Running   <span class=m>0</span>          20m
</span></span><span class=line><span class=cl>pod/webpage-deployment-75c8bb6ffc-m8dl4   1/1     Running   <span class=m>0</span>          20m
</span></span><span class=line><span class=cl>pod/webpage-deployment-75c8bb6ffc-xctr4   1/1     Running   <span class=m>0</span>          20m
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                      TYPE        CLUSTER-IP     EXTERNAL-IP   PORT<span class=o>(</span>S<span class=o>)</span>    AGE
</span></span><span class=line><span class=cl>service/webpage-service   ClusterIP   10.96.153.34   &lt;none&gt;        8080/TCP   20m
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                                 READY   UP-TO-DATE   AVAILABLE   AGE
</span></span><span class=line><span class=cl>deployment.apps/webpage-deployment   3/3     <span class=m>3</span>            <span class=m>3</span>           21m
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                                            DESIRED   CURRENT   READY   AGE
</span></span><span class=line><span class=cl>replicaset.apps/webpage-deployment-75c8bb6ffc   <span class=m>3</span>         <span class=m>3</span>         <span class=m>3</span>       21m
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                                        CLASS    HOSTS   ADDRESS          PORTS   AGE
</span></span><span class=line><span class=cl>ingress.networking.k8s.io/webpage-ingress   &lt;none&gt;   *       146.56.118.147   <span class=m>80</span>      37m
</span></span></code></pre></div></li><li><p>웹페이지에 접속하면, 여전히 Green 앱으로 접속됩니다.</p></li><li><p>실행중인 배포 파이프라인으로 돌아가 approval-stage에서 승인합니다.</p></li><li><p>승인이 되면, Traffic Shift가 됩니다. 이제 ns-blue가 Active입니다. ns-green내 webpage-ingress의 annotations에서 보면 <strong>canary-weight:</strong> &ldquo;<strong>0</strong>&ldquo;로 다시 변경된 걸 볼 수 있습니다. 이제 모든 요청은 ns-blue으로만 전달됩니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>opc@jumpbox-945115 ~<span class=o>]</span>$ kubectl get ingress webpage-ingress -n ns-green -o yaml
</span></span><span class=line><span class=cl>apiVersion: networking.k8s.io/v1
</span></span><span class=line><span class=cl>kind: Ingress
</span></span><span class=line><span class=cl>metadata:
</span></span><span class=line><span class=cl>  annotations:
</span></span><span class=line><span class=cl>    kubernetes.io/ingress.class: nginx
</span></span><span class=line><span class=cl>    nginx.ingress.kubernetes.io/canary: <span class=s2>&#34;true&#34;</span>
</span></span><span class=line><span class=cl>    nginx.ingress.kubernetes.io/canary-by-header: redirect-to-namespaceB
</span></span><span class=line><span class=cl>    nginx.ingress.kubernetes.io/canary-weight: <span class=s2>&#34;0&#34;</span>
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div></li><li><p>웹페이지에 접속하면, ns-blue 네임스페이스에 새롭게 배포한 Red 앱으로 접속됩니다. 여러번 반복해서 요청해도 Red 앱으로 접속됩니다.</p><p><img class=img-fluid1 src=../images/image-20220421112509154.png alt=image-20220421112509154 onerror='this.onerror=null,this.src="images/image-20220421112509154.png"'></p></li><li><p>이렇게 Blue/Green 전략으로 앱을 배포하면, 지정한 2개의 네임스페이스를 이용하여, 현재 서비스 되지 않는 네임스페이스로 신규 버전을 배포하고, 승인이 되면, 신규 버전으로 트래픽을 변경하는 방법으로 지속적인 신규 버전에 대한 배포를 지원합니다.</p></li></ol><h4 id=테스트---롤백>테스트 - 롤백</h4><p>신규 버전으로 서비스를 하다, 문제가 발생하면 이전 버전으로 롤백이 기능합니다.</p><ol><li><p>배포 히스토리 중에서 현재 버전을 배포한 배포 파이프라인으로 이동합니다.</p></li><li><p>Traffic Shift 메뉴 중에서 <strong>Revert traffic shift</strong>를 클릭합니다.</p><p><img class=img-fluid1 src=../images/image-20220421113416970.png alt=image-20220421113416970 onerror='this.onerror=null,this.src="images/image-20220421113416970.png"'></p></li><li><p>변경내용 확인 후 다시 <strong>Revert traffic shift</strong>를 클릭합니다.</p><p><img class=img-fluid1 src=../images/image-20220421113848569.png alt=image-20220421113848569 onerror='this.onerror=null,this.src="images/image-20220421113848569.png"'></p></li><li><p>수동 롤백 작업이 완료되었습니다.</p><p><img class=img-fluid1 src=../images/image-20220421114156771.png alt=image-20220421114156771 onerror='this.onerror=null,this.src="images/image-20220421114156771.png"'></p></li><li><p>배포 변경은 없고 Traffic Shift만 변경된 것으로, 쿠버네티스 배포 상태를 확인해 보면, ns-green내 webpage-ingress의 annotations에서 보면 <strong>canary-weight:</strong> &ldquo;<strong>100</strong>&ldquo;로 다시 변경된 걸 볼 수 있습니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>opc@jumpbox-945115 ~<span class=o>]</span>$ kubectl get ingress webpage-ingress -n ns-green -o yaml
</span></span><span class=line><span class=cl>apiVersion: networking.k8s.io/v1
</span></span><span class=line><span class=cl>kind: Ingress
</span></span><span class=line><span class=cl>metadata:
</span></span><span class=line><span class=cl>  annotations:
</span></span><span class=line><span class=cl>    kubernetes.io/ingress.class: nginx
</span></span><span class=line><span class=cl>    nginx.ingress.kubernetes.io/canary: <span class=s2>&#34;true&#34;</span>
</span></span><span class=line><span class=cl>    nginx.ingress.kubernetes.io/canary-by-header: redirect-to-namespaceB
</span></span><span class=line><span class=cl>    nginx.ingress.kubernetes.io/canary-weight: <span class=s2>&#34;100&#34;</span>
</span></span><span class=line><span class=cl>    nginx.ingress.kubernetes.io/rewrite-target: /<span class=nv>$2</span>
</span></span></code></pre></div></li><li><p>웹페이지에 접속하면, 마지막 배포앱인 Red에서 ns-blue 네임스페이스에 있는 기존 앱인 Green 앱으로 복구된 것을 알 수 있습니다.</p><p><img class=img-fluid1 src=../images/image-20220421114559253.png alt=image-20220421114559253 onerror='this.onerror=null,this.src="images/image-20220421114559253.png"'></p></li><li><p>이렇게 DevOps 서비스에서 제공하는 Blue/Green 전략으로 앱을 배포하면, 2개의 네임스페이스, Ingress Controller의 라우팅 규칙 변경을 통해서 Blue/Green 배포를 할 수 있습니다.</p></li></ol><br><br><div class="panel panel-caution"><div class=panel-body><p>이 글은 개인으로서, 개인의 시간을 할애하여 작성된 글입니다. 글의 내용에 오류가 있을 수 있으며, 글 속의 의견은 개인적인 의견입니다.</p></div></div><div class=edit-meta>Last updated on 20 Apr 2022<br></div><nav class=pagination><a class="nav nav-prev" href=https://thekoguryo.github.io/oracle-cloudnative/devops/1.deploy-app-on-oke-using-devops/ title="3.1 DevOps 서비스를 통해 Spring Boot 앱 배포 자동화하기"><i class="fas fa-arrow-left" aria-hidden=true></i> Prev - 3.1 DevOps 서비스를 통해 Spring Boot 앱 배포 자동화하기</a>
<a class="nav nav-next" href=https://thekoguryo.github.io/oracle-cloudnative/devops/3.canary-stragtegy/ title="3.3 DevOps 서비스의 Canary 배포 전략으로 배포하기">Next - 3.3 DevOps 서비스의 Canary 배포 전략으로 배포하기 <i class="fas fa-arrow-right" aria-hidden=true></i></a></nav><footer><p class=powered>Powered by <a href=https://gohugo.io>Hugo</a>. Theme by <a href=https://github.com/thingsym/hugo-theme-techdoc>TechDoc</a>. Design by <a href=https://www.thingslabo.com/>Thingsym</a>.</p></footer></main><div class=sidebar><nav><ul><li><form method=get action=https://thekoguryo.github.io//search><input type=text id=search-box name=q placeholder=Search></form><script type=text/javascript>$(document).ready(function(){$("#search-box").val($("#search-query").val())})</script></li><li><a></a></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oci/>OCI(Oracle Cloud Infrastructure)
<button type=button class=toggleButton>
<span class="right hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class=down><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li class=has-sub-menu><a href=https://thekoguryo.github.io/oci/chapter01/>1. OCI 기본개념
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oci/chapter01/1/>1.1 Regions, Availability Domains</a></li><li><a href=https://thekoguryo.github.io/oci/chapter01/2/>1.2 Fault Domains</a></li><li><a href=https://thekoguryo.github.io/oci/chapter01/3/>1.3 Compartment</a></li><li><a href=https://thekoguryo.github.io/oci/chapter01/4/>1.4 Virtual Cloud Network(VCN)</a></li><li><a href=https://thekoguryo.github.io/oci/chapter01/5/>1.5 Bare Metal, Virtual Machine</a></li><li><a href=https://thekoguryo.github.io/oci/chapter01/6/>1.6 클라우드 서비스 제공업체(CSP) 간 제공 서비스 매핑</a></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oci/chapter02/>2. OCI 서비스 시작하기
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oci/chapter02/1/>2.1 Oracle Cloud Free Tier 계정 생성</a></li><li><a href=https://thekoguryo.github.io/oci/chapter02/2/>2.2 OCI Console 접속하기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter02/3/>2.3 OCI Console 사용하기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter02/4/>2.4 최초 Cloud Account(Tenancy) 구조</a></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oci/chapter03/>3. OCI Compute VM 사용하기
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oci/chapter03/1/>3.1 작업 Compartment 만들기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter03/2/>3.2 가상 네트워크 환경을 위한 VCN 만들기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter03/3/>3.3 SSH 접속을 위한 Key Pair 만들기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter03/4/>3.4 Linux 인스턴스 생성하기</a></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oci/chapter03/5/>3.5 Linux 인스턴스 접속하기
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oci/chapter03/5/1/>3.5.1 Linux, Mac 에서 접속하기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter03/5/2/>3.5.2 Windows에서 PuTTY로 접속하기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter03/5/3/>3.5.3 PEM &lt;-> PPK 포맷 변경하기</a></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oci/chapter03/6/>3.6 하드 드라이브 같은 Block Volume
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oci/chapter03/6/1/>3.6.1 Block Volume 생성하기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter03/6/2/>3.6.2 Block Volume을 Instance에 장착하기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter03/6/3/>3.6.3 Block Volume에 연결하기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter03/6/4/>3.6.4 Block Volume 포맷하기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter03/6/5/>3.6.5 Block Volume 마운트하기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter03/6/6/>3.6.6 Block Volume 장착 해제하기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter03/6/7/>3.6.7 Block Volume 삭제하기</a></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oci/chapter03/7/>3.7 Block Volume 백업 활용하기
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oci/chapter03/7/1/>3.7.1 Block Volume 백업하기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter03/7/2/>3.7.2 백업으로 새 Volume 만들기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter03/7/3/>3.7.3 백업을 다른 Region으로 복사하기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter03/7/4/>3.7.4 정책 기반 Block Volume 백업하기</a></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oci/chapter03/8/>3.8 Boot Volume 백업 활용하기
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oci/chapter03/8/1/>3.8.1 Boot Volume 백업하기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter03/8/2/>3.8.2 백업으로 새 Boot Volume 만들기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter03/8/3/>3.8.3 Boot Volume으로 새 Instance 생성하기</a></li></ul></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oci/chapter04/>4. 고정 IP 할당을 위한 Reserved Public IP
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oci/chapter04/1/>4.1 Reserved Public IP 만들기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter04/2/>4.2 Reserved Public IP 할당하기</a></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oci/chapter05/>5. 방화벽 구성을 위해 Security Lists 사용하기
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oci/chapter05/1/>5.1 Linux 인스턴스에 Apache HTTP Server 설치</a></li><li><a href=https://thekoguryo.github.io/oci/chapter05/2/>5.2 Default Security List 업데이트 하기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter05/3/>5.3 Custom Security List 추가하기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter05/4/>5.4 Apache HTTP Server 접속 테스트</a></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oci/chapter06/>6. 사용자 권한 설정을 위해 IAM 사용하기
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oci/chapter06/1/>6.1 Compartment</a></li><li><a href=https://thekoguryo.github.io/oci/chapter06/2/>6.2 사용자 만들기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter06/3/>6.3 그룹 만들기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter06/4/>6.4 Policy 만들기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter06/5/>6.5 Policy 개념 잡기</a></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oci/chapter07/>7. Object Storage 사용하기
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oci/chapter07/1/>7.1 Bucket 생성하기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter07/2/>7.2 Bucket에 파일 올리기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter07/3/>7.3 Object 권한 관리 - 사전인증</a></li><li><a href=https://thekoguryo.github.io/oci/chapter07/4/>7.4 Object 권한 관리 - Public Bucket</a></li><li><a href=https://thekoguryo.github.io/oci/chapter07/5/>7.5 Public Bucket을 통한 정적 웹사이트 호스팅</a></li><li><a href=https://thekoguryo.github.io/oci/chapter07/6/>7.6 CloudBerry Explorer를 통한 파일 업로드</a></li><li><a href=https://thekoguryo.github.io/oci/chapter07/7/>7.7 수명주기를 통한 Archive 설정하기</a></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oci/chapter08/>8. 네트워크 파일 시스템인 File Storage 사용하기
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oci/chapter08/1/>8.1 File Storage 구성 예시</a></li><li><a href=https://thekoguryo.github.io/oci/chapter08/2/>8.2 FSS를 Linux VM에 마운트하여 사용하기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter08/3/>8.3 접근 제어를 위한 Export Option</a></li><li><a href=https://thekoguryo.github.io/oci/chapter08/4/>8.4 백업을 위한 Snapshot</a></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oci/chapter09/>9. Machine Image
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oci/chapter09/1/>9.1 기본 제공하고 있는 OS Image</a></li><li><a href=https://thekoguryo.github.io/oci/chapter09/2/>9.2 인스턴스에서 Custom Image 만들기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter09/3/>9.3 Custom Image Export/Import</a></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oci/chapter10/>10. 고가용성을 위한 Load Balancer 사용하기
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oci/chapter10/1/>10.1 Load Balancer 구성 예시</a></li><li><a href=https://thekoguryo.github.io/oci/chapter10/2/>10.2 VCN 구성</a></li><li><a href=https://thekoguryo.github.io/oci/chapter10/3/>10.3 Backend 웹서버 만들기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter10/4/>10.4 Load Balancer를 위한 Subnet 만들기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter10/5/>10.5 Load Balancer 만들기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter10/6/>10.6 Load Balancer 연결 확인</a></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oci/chapter11/>11. Domain Name System (DNS)
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oci/chapter11/1/>11.1 Domain Name과 매핑하기</a></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oci/chapter12/>12. OCI 자원 모니터링을 위한 Monitoring
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oci/chapter12/1/>12.1 Compute 인스턴스 Monitoring 활성화</a></li><li><a href=https://thekoguryo.github.io/oci/chapter12/2/>12.2 Monitoring Alarm 만들기</a></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oci/chapter12/3/>12.3 OCI Grafana Plugin
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oci/chapter12/3/1/>12.3.1 Compute VM에 Grafana 설치</a></li><li><a href=https://thekoguryo.github.io/oci/chapter12/3/2/>12.3.2 Grafana 구성</a></li></ul></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oci/chapter13/>13. Metric에 기반한 Autoscaling
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oci/chapter13/1/>13.1 Autoscaling을 위한 준비</a></li><li><a href=https://thekoguryo.github.io/oci/chapter13/2/>13.2 Autoscaling 구성</a></li><li><a href=https://thekoguryo.github.io/oci/chapter13/3/>13.3 Autoscaling 테스트</a></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oci/chapter14/>14. Developer Tools 사용하기
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li class=has-sub-menu><a href=https://thekoguryo.github.io/oci/chapter14/1/>14.1 OCI CLI
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li class=has-sub-menu><a href=https://thekoguryo.github.io/oci/chapter14/1/1/>14.1.1 OCI CLI 설치하기
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oci/chapter14/1/1/1/>14.1.1.1 Windows에서 OCI CLI 설치하기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter14/1/1/2/>14.1.1.2 리눅스계열에서 OCI CLI 설치하기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter14/1/1/3/>14.1.1.3 Config File 설정</a></li><li><a href=https://thekoguryo.github.io/oci/chapter14/1/1/4/>14.1.1.4 API Public Key 등록</a></li><li><a href=https://thekoguryo.github.io/oci/chapter14/1/1/5/>14.1.1.5 OCI CLI 설치 확인</a></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oci/chapter14/1/2/>14.1.2 Object Storage를 CLI로 사용하기
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oci/chapter14/1/2/1/>14.1.2.1 Object Storage를 위한 IAM Policy 설정</a></li><li><a href=https://thekoguryo.github.io/oci/chapter14/1/2/2/>14.1.2.2 CLI를 통한 파일 업로드</a></li></ul></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oci/chapter14/2/>14.2 Terraform
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oci/chapter14/2/1/>14.2.1 Terraform 설치하기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter14/2/2/>14.2.2 Terraform Configurations 작성하기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter14/2/3/>14.2.3 Terraform OCI Provider 연결정보 구하기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter14/2/4/>14.2.4 Terraform Configuration 실행하기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter14/2/5/>14.2.5 다중 환경을 위한 workspace 사용하기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter14/2/6/>14.2.6 예시, list, count를 이용한 유저 만들기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter14/2/7/>14.2.7 OCI Terraform 사용 예제</a></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oci/chapter14/3/>14.3 REST API
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oci/chapter14/3/1/>14.3.1 OCI Request Signature Version 1</a></li><li><a href=https://thekoguryo.github.io/oci/chapter14/3/2/>14.3.2 Bash 샘플 클라이언트</a></li><li><a href=https://thekoguryo.github.io/oci/chapter14/3/3/>14.3.3 Insomnia - OCI REST API 호출하기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter14/3/4/>14.3.4 Postman - OCI REST API 호출하기</a></li></ul></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oci/chapter15/>15. Resource Manager 사용하기
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oci/chapter15/1/>15.1 Resource Manager 사용하기</a></li><li><a href=https://thekoguryo.github.io/oci/chapter15/2/>15.2 Resource Manager을 위한 Stack Template</a></li><li><a href=https://thekoguryo.github.io/oci/chapter15/3/>15.3 Resource Manager을 위한 Private Git 서버 구성</a></li></ul></li></ul></li><li class="parent has-sub-menu"><a href=https://thekoguryo.github.io/oracle-cloudnative/>Oracle Cloud Native
<button type=button class=toggleButton>
<span class="right hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class=down><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=sub-menu><li class=has-sub-menu><a href=https://thekoguryo.github.io/oracle-cloudnative/oke/>1. 관리형 쿠버네티스 OKE 사용하기
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oracle-cloudnative/oke/1.oke/>1.1 OKE(Oracle Container Engine for Kubernetes) 소개</a></li><li><a href=https://thekoguryo.github.io/oracle-cloudnative/oke/2.install-quick-oke-cluster/>1.2 OKE 클러스터 만들기</a></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oracle-cloudnative/oke/3.access-cluster/>1.3 OKE 클러스터 연결하기
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oracle-cloudnative/oke/3.access-cluster/1.cloudshell-access/>1.3.1 Cloud Shell로 클러스터 연결하기</a></li><li><a href=https://thekoguryo.github.io/oracle-cloudnative/oke/3.access-cluster/2.local-access/>1.3.2 로컬 환경에서 클러스터 연결하기</a></li></ul></li><li><a href=https://thekoguryo.github.io/oracle-cloudnative/oke/4.deploy-docker-hub-image-with-lb/>1.4 앱 배포 및 Load Balancer 사용하기</a></li><li><a href=https://thekoguryo.github.io/oracle-cloudnative/oke/5.deploy-ocir-image/>1.5 OCIR 이미지 사용하기</a></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oracle-cloudnative/oke/6.persistent-volume/>1.6 Persistent Volume 사용하기
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oracle-cloudnative/oke/6.persistent-volume/1.block-volume/>1.6.1 Block Volume 사용하기</a></li><li><a href=https://thekoguryo.github.io/oracle-cloudnative/oke/6.persistent-volume/2.file-storage/>1.6.2 File Storage 사용하기</a></li><li><a href=https://thekoguryo.github.io/oracle-cloudnative/oke/6.persistent-volume/3.file-storage-dynamic-provisioning/>1.6.3 File Storage 사용하기 - Dynamic Provisioning</a></li></ul></li><li><a href=https://thekoguryo.github.io/oracle-cloudnative/oke/7.supported-version-and-upgrade/>1.7 Kubernetes 버전 업그레이드</a></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oracle-cloudnative/ocir/>2. 컨테이너 레지스트리인 OCIR 사용하기
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oracle-cloudnative/ocir/1.scan-image/>2.1 컨테이너 이미지 스캔</a></li><li><a href=https://thekoguryo.github.io/oracle-cloudnative/ocir/2.helm-chart/>2.2 Helm Chart Repository로 사용하기</a></li></ul></li><li class="parent has-sub-menu"><a href=https://thekoguryo.github.io/oracle-cloudnative/devops/>3. CI/CD인 OCI DevOps 서비스 사용하기
<button type=button class=toggleButton>
<span class="right hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class=down><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=sub-menu><li><a href=https://thekoguryo.github.io/oracle-cloudnative/devops/1.deploy-app-on-oke-using-devops/>3.1 DevOps 서비스를 통해 Spring Boot 앱 배포 자동화하기</a></li><li class=active><a href=https://thekoguryo.github.io/oracle-cloudnative/devops/2.bluegreen-stragtegy/>3.2 DevOps 서비스의 Blue/Green 배포 전략으로 배포하기</a></li><li><a href=https://thekoguryo.github.io/oracle-cloudnative/devops/3.canary-stragtegy/>3.3 DevOps 서비스의 Canary 배포 전략으로 배포하기</a></li><li><a href=https://thekoguryo.github.io/oracle-cloudnative/devops/4.deploy-app-with-helm-chart/>3.4 DevOps 서비스를 통해 Helm Chart로 배포 자동화하기</a></li><li><a href=https://thekoguryo.github.io/oracle-cloudnative/devops/5.detect-vulnerabilities-from-build-pipeline/>3.5 DevOps 서비스의 빌드시 패키지 취약점 검사하기</a></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oracle-cloudnative/oss/>4. OSS(Open Source Software) 활용하기
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li class=has-sub-menu><a href=https://thekoguryo.github.io/oracle-cloudnative/oss/ingress-controller/>4.1 Ingress Controller
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oracle-cloudnative/oss/ingress-controller/1.install-nginx-ingress-controller/>4.1.1 NGINX Ingress Controller 설치하기</a></li><li><a href=https://thekoguryo.github.io/oracle-cloudnative/oss/ingress-controller/2.nginx-ingress-path/>4.1.2 NGINX Ingress Controller에서 PATH 기반 라우팅</a></li><li><a href=https://thekoguryo.github.io/oracle-cloudnative/oss/ingress-controller/3.nginx-ingress-host/>4.1.3 NGINX Ingress Controller에서 host 기반 라우팅(feat. OCI DNS)</a></li><li><a href=https://thekoguryo.github.io/oracle-cloudnative/oss/ingress-controller/4.nginx-ingress-tls-termination/>4.1.4 NGINX Ingress Controller에서 TLS termination(Ingress 레벨)</a></li><li><a href=https://thekoguryo.github.io/oracle-cloudnative/oss/ingress-controller/5.nginx-ingress-tls-termination-lb/>4.1.5 NGINX Ingress Controller에서 TLS termination(OCI Load Balancer)</a></li><li><a href=https://thekoguryo.github.io/oracle-cloudnative/oss/ingress-controller/6.nginx-ingress-preserve-client-ip/>4.1.6 NGINX Ingress Controller에서 클라이언트 IP 얻기(OCI Network Load Balancer)</a></li><li><a href=https://thekoguryo.github.io/oracle-cloudnative/oss/ingress-controller/7.nginx-ingress-preserve-client-ip-lb/>4.1.7 NGINX Ingress Controller에서 클라이언트 IP 얻기(OCI Load Balancer)</a></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oracle-cloudnative/oss/logging-efk/>4.2 Logging - EFK
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oracle-cloudnative/oss/logging-efk/1.install-efk/>4.2.1 EFK 설치하기</a></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oracle-cloudnative/oss/monitoring/>4.3 Monitoring - Prometheus&amp;Grafana
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oracle-cloudnative/oss/monitoring/1.install-prometheus-grafana/>4.3.1 Prometheus&amp;Grafana 설치하기</a></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oracle-cloudnative/oss/service-mesh/>4.4 Service Mesh - Istio
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oracle-cloudnative/oss/service-mesh/1.sampleapp-without-istio/>4.4.1 Service Mesh 없는 마이크로서비스 앱 배포</a></li><li><a href=https://thekoguryo.github.io/oracle-cloudnative/oss/service-mesh/2.sampleapp-with-istio/>4.4.2 마이크로서비스 앱에 Service Mesh - Istio 적용하기</a></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oracle-cloudnative/oss/repository/>4.5 Repository
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oracle-cloudnative/oss/repository/1.nexus-repository/>4.5.1 Image Registry로 Nexus Repository 사용하기</a></li></ul></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oracle-cloudnative/oci-services/>5. OCI 서비스 활용하기
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oracle-cloudnative/oci-services/1.oci-service-operator-1.1.0/>5.1 OKE에서 OCI 자원관리를 위한 Service Operator</a></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oracle-cloudnative/oci-services/logging/>5.2 Logging 서비스
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oracle-cloudnative/oci-services/logging/1.oci-logging/>5.2.1 OCI Logging을 사용한 로그 모니터링</a></li><li><a href=https://thekoguryo.github.io/oracle-cloudnative/oci-services/logging/2.oci-opensearch/>5.2.2 OpenSearch 기반 OCI Search 서비스를 사용한 로그 모니터링</a></li><li><a href=https://thekoguryo.github.io/oracle-cloudnative/oci-services/logging/3.logging-analytics/>5.2.3 Logging Analytics를 사용한 모니터링</a></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oracle-cloudnative/oci-services/monitoring/>5.3 Monitoring 서비스
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oracle-cloudnative/oci-services/monitoring/1.management-agent/>5.3.1 Management Agent를 사용한 모니터링</a></li></ul></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oracle-cloudnative/verrazzano/>6. 엔터프라이즈 컨테이너 플랫폼 Verrazzano 사용하기
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oracle-cloudnative/verrazzano/1.install-verrazzano/>6.1 Verrazzano 설치</a></li><li><a href=https://thekoguryo.github.io/oracle-cloudnative/verrazzano/2.deploy-app/>6.2 Open Application Model 이해 및 애플리케이션 배포하기</a></li><li><a href=https://thekoguryo.github.io/oracle-cloudnative/verrazzano/3.multicluster-verrazzano/>6.3 Multicluster Verrazzano 설치하기</a></li><li><a href=https://thekoguryo.github.io/oracle-cloudnative/verrazzano/4.deploy-app-to-multicluster/>6.4 Multicluster에 애플리케이션 배포하기</a></li><li><a href=https://thekoguryo.github.io/oracle-cloudnative/verrazzano/5.weblogic-on-oke-using-verrazzano/>6.5 WebLogic Server를 Verrazzano를 통해 OKE에 배포하기</a></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oracle-cloudnative/appdev/>7. 애플리케이션 개발하기
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oracle-cloudnative/appdev/1.develop-spring-boot-app/>7.1 Spring Boot 애플리케이션 개발하기</a></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oracle-cloudnative/appdev/2.graalvm/>7.2 GraalVM 사용하기
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oracle-cloudnative/appdev/2.graalvm/1.use-graal-vm/>7.2.1 GraalVM 기반 컨테이너 이미지 만들기</a></li></ul></li></ul></li><li class=has-sub-menu><a href=https://thekoguryo.github.io/oracle-cloudnative/container-instances/>8. Container Instances
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a><ul class=hidden><li><a href=https://thekoguryo.github.io/oracle-cloudnative/container-instances/1.use-container-instances/>8.1 Container Instances로 컨테이너 배포하기</a></li></ul></li><li><a href=https://thekoguryo.github.io/oracle-cloudnative/troubleshooting/>Troubleshooting
<button type=button class=toggleButton>
<span class=right><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right"><polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"/></svg></span><span class="down hidden"><svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down"><polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"/></svg></span></button></a></li></ul></li></ul></nav><div class=sidebar-footer></div></div></div><a href=# id=backtothetop-fixed class=backtothetop data-backtothetop-duration=600 data-backtothetop-easing=easeOutQuart data-backtothetop-fixed-fadein=1000 data-backtothetop-fixed-fadeout=1000 data-backtothetop-fixed-bottom=10 data-backtothetop-fixed-right=20><span class="fa-layers fa-fw"><i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up"></i></span></a>
<script src=https://thekoguryo.github.io/js/copy-code-button.js></script></div></body></html>