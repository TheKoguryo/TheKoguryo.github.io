<!DOCTYPE html>
<html lang="ko">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>1.5 OCIR 이미지 사용하기 - TheKoguryo&#39;s 기술 블로그 | Oracle Cloud Native</title>
<meta name="generator" content="Hugo 0.89.2" />
<link href="https://thekoguryo.github.io/oci-cloudnativeindex.xml" rel="alternate" type="application/rss+xml">
<link rel="canonical" href="https://thekoguryo.github.io/oci-cloudnative/oke/5.deploy-ocir-image/">
<link rel="stylesheet" href="https://thekoguryo.github.io/oci-cloudnative/css/theme.min.css">
<link rel="stylesheet" href="https://thekoguryo.github.io/oci-cloudnative/css/d2coding.css">
<link rel="stylesheet" href="https://thekoguryo.github.io/oci-cloudnative/css/fontawesome-all.min.css">
<script src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
<link rel="stylesheet" href="https://thekoguryo.github.io/oci-cloudnative/css/chroma.min.css">
<script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://thekoguryo.github.io/oci-cloudnative/js/functions.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js"></script>
<script src="https://thekoguryo.github.io/oci-cloudnative/js/jquery.backtothetop/jquery.backtothetop.min.js"></script>
<script src="https://thekoguryo.github.io/oci-cloudnative/js/jqcloud/jqcloud.js"></script>
<link rel="stylesheet" href="https://thekoguryo.github.io/oci-cloudnative/js/jqcloud/jqcloud.css">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-106207316-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-106207316-1');
</script>
</head>
<body>
<div class="container"><header>
<h1>TheKoguryo&#39;s 기술 블로그 | Oracle Cloud Native</h1>

 <span class="version">Version 2021.12.01</span>
<a href="https://github.com/TheKoguryo" class="github"><i class="fab fa-github"></i></a>
</header>
<div class="menu">
<nav>
<ul>
<li ><a href="https://thekoguryo.github.io">Home</a></li>
<li ><a href="/oci-cloudnative/">Oracle Cloud Native</a></li>
<li ><a href="https://github.com/TheKoguryo/TheKoguryo.github.io/issues/new">Feedback</a></li></ul>
</nav>
</div>
<div class="content-container">
<main><h1 id="15-ocir-이미지-사용하여-앱-배포하기">1.5 OCIR 이미지 사용하여 앱 배포하기</h1>
<h2 id="ocir에-이미지-등록하기">OCIR에 이미지 등록하기</h2>
<p>Oracle Cloud Infrastructure Registry(OCIR)는 오라클이 제공하는 관리형 컨테이너 레지스트리로 Docker V2 API를 지원하며, Open Container Initiate 호환 컨테이너 레지스트리입니다.  docker cli를 통해 이미지를 Push, Pull 해서 사용할 수 있으며, Kubernetes 클러스터에서도 사용할 수 있습니다.</p>
<p>OCIR에 이미지를 사용하기 위해서는 먼저 등록 작업이 필요하며, 앞서 예제에서 사용한 nginx 이미지를 아래 절차에 따라 등록해 봅니다.</p>
<h3 id="ocir-repository-만들기">OCIR Repository 만들기</h3>
<ol>
<li>
<p>OCI 콘솔에 로그인합니다.</p>
</li>
<li>
<p>좌측 상단 햄버거 메뉴에서 <strong>Developer Services</strong> &gt; <strong>Containers &amp; Artifacts</strong> : <strong>Container Registry</strong>로 이동합니다.</p>
</li>
<li>
<p><strong>List Scope</strong>에서 대상 <strong>Compartment</strong>(예, oke-labs)를 선택합니다.</p>
</li>
<li>
<p>이미지를 Push하기 전에 먼저 OCIR에 repository를 생성이 필요합니다.</p>
<p><strong>Create repositoy</strong>를 클릭하여 아래와 같이 nginx repository를 생성합니다. Push, Pull 모두 인증 테스트를 위해 Access 모드를 <strong>Private</strong>으로 선택합니다.</p>
<p>







<img class="img-fluid1" src="../images/image-20211109173748014.png" alt='image-20211109173748014' />
</p>
</li>
<li>
<p>생성 완료</p>
<p>







<img class="img-fluid1" src="../images/image-20211109174409016.png" alt='image-20211109174409016' />
</p>
</li>
<li>
<p>Repository 화면에서 Namespace를 복사해 둡니다. Region내에 Tenant를 나타내는 <strong>tenancy-namespace</strong>: cnrlxx3w0wgq로 이후 로그인시 필요합니다.</p>
</li>
</ol>
<h3 id="oci-auth-token-만들기">OCI Auth Token 만들기</h3>
<p>docker cli로 docker hub에 이미지를 등록하거나, 가져올때 username/password로 docker login을 통해 로그인을 합니다. OCIR에도 마찬가지로 로그인이 필요하며, password 대신 보안을 위해 Auth Token을 사용합니다.</p>
<ol>
<li>
<p>우측 상단 사용자의 Profile 아이콘을 클릭하여 User Settings으로 이동합니다.</p>
<ul>
<li>아래 그림상의 유저는 OCI local 유저로 username이 oke-admin입니다.</li>
<li>유저명이 <code>oracleidentitycloudservice/~~~</code>로 시작하면 Oracle Identiry Cloud Service의 유저입니다.</li>
</ul>
<p>







<img class="img-fluid1" src="../images/image-20211109175044623.png" alt='image-20211109175044623' />
</p>
</li>
<li>
<p>왼쪽 아래 <strong>Resources</strong> &gt; <strong>Auth Token</strong>으로 이동합니다.</p>
</li>
<li>
<p>Auth Token 생성을 위해 <strong>Generate Token</strong>을 클릭합니다.</p>
</li>
<li>
<p>설명을 입력하고 생성합니다. Auth Token은 생성시에만 볼수 있으므로 복사해 둡니다.</p>
<p>







<img class="img-fluid1" src="../images/image-20211109175405289.png" alt='image-20211109175405289' />
</p>
<p>







<img class="img-fluid1" src="../images/image-20211109175414210.png" alt='image-20211109175414210' />
</p>
</li>
</ol>
<h3 id="ocir-로그인-및-이미지-push">OCIR 로그인 및 이미지 Push</h3>
<ol>
<li>
<p>앞서 생성한 Auth Token을 통해 Cloud Shell 또는 접속 환경에서 docker cli로 로그인 합니다.</p>
<ul>
<li>OCIR 주소: <code>&lt;region-key&gt;.ocir.io</code>
<ul>
<li>region-key: 서울 Region은 ap-seoul-1 또는 icn</li>
<li>전체 Region 정보: <a href="https://docs.oracle.com/en-us/iaas/Content/Registry/Concepts/registryprerequisites.htm#regional-availability">Availability by Region</a></li>
</ul>
</li>
<li>username:
<ul>
<li><code>&lt;tenancy-namespace&gt;/&lt;username&gt;</code> 형식</li>
<li>Username: OCI 서비스 콘솔에서 유저 Profile에서 보이는 유저명을 사용합니다.
<ol>
<li>Oracle Identity Cloud Service상의 유저: <code>&lt;tenancy-namespace&gt;/oracleidentitycloudservice/&lt;username&gt;</code></li>
<li>OCI Local 유저: <code>&lt;tenancy-namespace&gt;/&lt;username&gt;</code></li>
</ol>
</li>
<li>tenancy-namespace: 앞서 Repository 생성시 확인한 tenancy-namespace 또는 Cloud Shell에서 <code>oci os ns get</code>으로 확인 가능</li>
</ul>
</li>
<li>Password: 앞서 생성한 로그인할 유저의 Auth Token</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">oke_admin@cloudshell:~ <span class="o">(</span>ap-seoul-1<span class="o">)</span>$ oci os ns get
<span class="o">{</span>
  <span class="s2">&#34;data&#34;</span>: <span class="s2">&#34;cnrlxx3w0wgq&#34;</span>
<span class="o">}</span>
oke_admin@cloudshell:~ <span class="o">(</span>ap-seoul-1<span class="o">)</span>$ docker login ap-seoul-1.ocir.io
Username: cnrlxx3w0wgq/oke-admin
Password: 
WARNING! Your password will be stored unencrypted in /home/oke_admin/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store

Login Succeeded
</code></pre></div></li>
<li>
<p>이미지 Push</p>
<ul>
<li>OCIR에 생성한 Repository로 Push 하기 위해 아래 형식으로 태그를 한 후 Push 하면 됩니다.
<ul>
<li><code>&lt;region-key&gt;.ocir.io/&lt;tenancy-namespace&gt;/&lt;repo-name&gt;:&lt;tag&gt;</code></li>
</ul>
</li>
<li>nginx:latest 예시</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">docker pull nginx:latest
docker tag nginx:latest ap-seoul-1.ocir.io/cnrlxx3w0wgq/nginx:latest
docker push ap-seoul-1.ocir.io/cnrlxx3w0wgq/nginx:latest
</code></pre></div></li>
<li>
<p>OCIR 확인</p>
<p>OCI 서비스 콘솔로 다시 돌아가서 대상 Compartment 기준으로 Push한 이미지가 정상적으로 등록된 것을 알 수 있습니다.</p>
<p>







<img class="img-fluid1" src="../images/image-20211109220755364.png" alt='image-20211109220755364' />
</p>
</li>
</ol>
<h3 id="실수를-막기-위한-참고-사항">실수를 막기 위한 참고 사항</h3>
<p>다음과 같은 상황에서는 docker push하면 어떻게 될까요?</p>
<ul>
<li>
<p>Push 전에 OCIR Repository를 사전에 만들지 않은 경우</p>
</li>
<li>
<p>dev/nginx:latest(또는 bitnami/nginx:latest)와 같이 이미지 이름 앞에 추가 적인 경로가 있는 경우에 OCIR Repoistory를 dev 로만 만든 경우</p>
<p>=&gt; 사전에 OCIR Repository를 만들지 않으면, 기본 설정에 의해 root compartment 쪽에 push 됩니다.</p>
<p>=&gt; dev/nginx 까지마 Repository 이름으로 해야 합니다. 그렇게 만들지 않는 경우 동일하게 root compartment 쪽에 push 됩니다.</p>
</li>
</ul>
<p>Container Registry 우측 상단에 Settings를 클릭하여 설정정보를 보면 아래와 같이 대상 repository가 없는 경우 root compartment에 private repository를 자동으로 새로 만들고 push 하는 것이 기본 값으로 체크되어 있습니다.</p>
<p>







<img class="img-fluid1" src="../images/image-20211109221903416.png" alt='image-20211109221903416' />
</p>
<h2 id="ocir-이미지로-oke-클러스터에-배포">OCIR 이미지로 OKE 클러스터에 배포</h2>
<h3 id="ocir-이미지-배포-테스트">OCIR 이미지 배포 테스트</h3>
<ol>
<li>
<p>가장 흔한 형태인 Public Container Registry에 이미지를 가져와서 OKE 클러스터에 배포를 해봅니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">kubectl create deployment nginx-ocir --image<span class="o">=</span>ap-seoul-1.ocir.io/cnrlxx3w0wgq/nginx:latest
</code></pre></div></li>
<li>
<p>배포 결과 아래와 같이 private repository로 인증문제로 이미지를 가져오는 오류가 발생한 것을 알수 있습니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">oke_admin@cloudshell:~ <span class="o">(</span>ap-seoul-1<span class="o">)</span>$ kubectl create deployment nginx-ocir --image<span class="o">=</span>ap-seoul-1.ocir.io/cnrlxx3w0wgq/nginx:latest
deployment.apps/nginx-ocir created
oke_admin@cloudshell:~ <span class="o">(</span>ap-seoul-1<span class="o">)</span>$ kubectl get pod
NAME                          READY   STATUS         RESTARTS   AGE
nginx-ocir-6c9d554866-nqgjg   0/1     ErrImagePull   <span class="m">0</span>          10s
oke_admin@cloudshell:~ <span class="o">(</span>ap-seoul-1<span class="o">)</span>$ kubectl describe pod nginx-ocir-6c9d554866-nqgjg
Name:         nginx-ocir-6c9d554866-nqgjg
...
Events:
  Type     Reason     Age                From               Message
  ----     ------     ----               ----               -------
...
  Warning  Failed     11s <span class="o">(</span>x2 over 23s<span class="o">)</span>  kubelet            Failed to pull image <span class="s2">&#34;ap-seoul-1.ocir.io/cnrlxx3w0wgq/nginx:latest&#34;</span>: rpc error: <span class="nv">code</span> <span class="o">=</span> Unknown <span class="nv">desc</span> <span class="o">=</span> Error reading manifest latest in ap-seoul-1.ocir.io/cnrlxx3w0wgq/nginx: denied: Anonymous users are only allowed <span class="nb">read</span> access on public repos
  Warning  Failed     11s <span class="o">(</span>x2 over 23s<span class="o">)</span>  kubelet            Error: ErrImagePull
</code></pre></div></li>
</ol>
<h3 id="ocir-private-repository-이미지-배포-테스트---imagepullsecret">OCIR Private Repository 이미지 배포 테스트 - imagepullsecret</h3>
<p>Private Repository에서 이미지를 가져와서 사용하려면 인증을 위한 secret을 등록해서 사용해야 합니다. 아래 절차에 따라 secret을 만들어 사용합니다.</p>
<ol>
<li>
<p>앞서 Auth Token을 사용하여 docker login을 하였습니다. 로그인 하면 사용자 홈 밑에 .docker/config.json에 인증정보가 저장됩니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">oke_admin@cloudshell:~ <span class="o">(</span>ap-seoul-1<span class="o">)</span>$ docker login ap-seoul-1.ocir.io
Username: cnrlxx3w0wgq/oke-admin
Password: 
WARNING! Your password will be stored unencrypted in /home/oke_admin/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store

Login Succeeded
</code></pre></div></li>
<li>
<p>위 인증 정보를 통해 로그인 합니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">kubectl create secret generic ocir-secret <span class="se">\
</span><span class="se"></span>    --from-file<span class="o">=</span>.dockerconfigjson<span class="o">=</span>/home/oke_admin/.docker/config.json <span class="se">\
</span><span class="se"></span>    --type<span class="o">=</span>kubernetes.io/dockerconfigjson
</code></pre></div></li>
<li>
<p>또는 docker login 정보 없이 직접 secret을 만들 수도 있습니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">kubectl create secret docker-registry &lt;secret-name&gt; --docker-server<span class="o">=</span>&lt;region-key&gt;.ocir.io --docker-username<span class="o">=</span><span class="s1">&#39;&lt;tenancy-namespace&gt;/&lt;oci-username&gt;&#39;</span> --docker-password<span class="o">=</span><span class="s1">&#39;&lt;oci-auth-token&gt;&#39;</span> --docker-email<span class="o">=</span><span class="s1">&#39;&lt;email-address&gt;&#39;</span>
</code></pre></div></li>
<li>
<p>아래와 같이 imagepullsecret을 사용하여 다시 배포합니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">apps/v1</span><span class="w">
</span><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Deployment</span><span class="w">
</span><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l">nginx-ocir</span><span class="w">
</span><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">nginx-ocir</span><span class="w">
</span><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="w">
</span><span class="w">  </span><span class="nt">selector</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l">nginx-ocir</span><span class="w">
</span><span class="w">  </span><span class="nt">template</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="nt">labels</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l">nginx-ocir</span><span class="w">
</span><span class="w">    </span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="nt">containers</span><span class="p">:</span><span class="w">
</span><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">nginx</span><span class="w">
</span><span class="w">        </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">ap-seoul-1.ocir.io/cnrlxx3w0wgq/nginx:latest</span><span class="w">
</span><span class="w">      </span><span class="nt">imagePullSecrets</span><span class="p">:</span><span class="w">
</span><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">ocir-secret</span><span class="w">
</span></code></pre></div></li>
<li>
<p>아래와 같이 정상 배포되는 것을 알 수 있습니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">oke_admin@cloudshell:~ <span class="o">(</span>ap-seoul-1<span class="o">)</span>$ kubectl create secret generic ocir-secret <span class="se">\
</span><span class="se"></span>&gt;     --from-file<span class="o">=</span>.dockerconfigjson<span class="o">=</span>/home/oke_admin/.docker/config.json <span class="se">\
</span><span class="se"></span>&gt;     --type<span class="o">=</span>kubernetes.io/dockerconfigjson
secret/ocir-secret created
oke_admin@cloudshell:~ <span class="o">(</span>ap-seoul-1<span class="o">)</span>$ kubectl get secret
NAME                  TYPE                                  DATA   AGE
default-token-2tvwr   kubernetes.io/service-account-token   <span class="m">3</span>      24h
ocir-secret           kubernetes.io/dockerconfigjson        <span class="m">1</span>      13s
oke_admin@cloudshell:~ <span class="o">(</span>ap-seoul-1<span class="o">)</span>$ kubectl apply -f nginx-ocir-deployment.yaml 
deployment.apps/nginx-ocir created
oke_admin@cloudshell:~ <span class="o">(</span>ap-seoul-1<span class="o">)</span>$ kubectl get all
NAME                              READY   STATUS    RESTARTS   AGE
pod/nginx-ocir-798957d964-9rddt   1/1     Running   <span class="m">0</span>          7s

NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT<span class="o">(</span>S<span class="o">)</span>   AGE
service/kubernetes   ClusterIP   10.96.0.1    &lt;none&gt;        443/TCP   24h

NAME                         READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/nginx-ocir   1/1     <span class="m">1</span>            <span class="m">1</span>           8s

NAME                                    DESIRED   CURRENT   READY   AGE
replicaset.apps/nginx-ocir-798957d964   <span class="m">1</span>         <span class="m">1</span>         <span class="m">1</span>       7s
</code></pre></div></li>
</ol>
<h3 id="ocir-private-repository-이미지-배포-테스트---default-imagepullsecret">OCIR Private Repository 이미지 배포 테스트 - default imagepullsecret</h3>
<p>매번 imagepullsecret을 지정하는 것이 불편한 경우 기본으로 사용할 Container Repository에 대한 인증을 default로 저장하여 사용할 수도 있습니다.</p>
<ol>
<li>
<p>namespace에 default serviceaccount가 있는데, 여기에 아래와 같이 imagepullsecret을 추가합니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">kubectl patch serviceaccount default -p <span class="s1">&#39;{&#34;imagePullSecrets&#34;: [{&#34;name&#34;: &#34;ocir-secret&#34;}]}&#39;</span>
</code></pre></div></li>
<li>
<p>그 결과 아래와 같이 default serviceaccount에 기본적으로 사용할 imagesecret이 추가되었습니다</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">oke_admin@cloudshell:~ <span class="o">(</span>ap-seoul-1<span class="o">)</span>$ kubectl patch serviceaccount default -p <span class="s1">&#39;{&#34;imagePullSecrets&#34;: [{&#34;name&#34;: &#34;ocir-secret&#34;}]}&#39;</span>
serviceaccount/default patched
oke_admin@cloudshell:~ <span class="o">(</span>ap-seoul-1<span class="o">)</span>$ kubectl get sa default -o yaml
apiVersion: v1
imagePullSecrets:
- name: ocir-secret
kind: ServiceAccount
metadata:
  creationTimestamp: <span class="s2">&#34;2021-11-08T13:51:17Z&#34;</span>
  name: default
  namespace: default
  resourceVersion: <span class="s2">&#34;277559&#34;</span>
  uid: f72718f9-135c-46d2-b0ac-a1ea1b990863
secrets:
- name: default-token-2tvwr
</code></pre></div></li>
<li>
<p>앞서 배포한 yaml을 삭제하고 인증정보가 없어 처음 실패한 명령으로 다시 배포합니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">kubectl create deployment nginx-ocir --image<span class="o">=</span>ap-seoul-1.ocir.io/cnrlxx3w0wgq/nginx:latest
</code></pre></div></li>
<li>
<p>결과확인하면 default imagepullsecret을 사용하여 정상 배포됨을 알 수 있습니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">oke_admin@cloudshell:~ <span class="o">(</span>ap-seoul-1<span class="o">)</span>$ kubectl create deployment nginx-ocir --image<span class="o">=</span>ap-seoul-1.ocir.io/cnrlxx3w0wgq/nginx:latest
deployment.apps/nginx-ocir created
oke_admin@cloudshell:~ <span class="o">(</span>ap-seoul-1<span class="o">)</span>$ kubectl get all
NAME                              READY   STATUS    RESTARTS   AGE
pod/nginx-ocir-6c9d554866-vmjtb   1/1     Running   <span class="m">0</span>          5s

NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT<span class="o">(</span>S<span class="o">)</span>   AGE
service/kubernetes   ClusterIP   10.96.0.1    &lt;none&gt;        443/TCP   24h

NAME                         READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/nginx-ocir   1/1     <span class="m">1</span>            <span class="m">1</span>           5s

NAME                                    DESIRED   CURRENT   READY   AGE
replicaset.apps/nginx-ocir-6c9d554866   <span class="m">1</span>         <span class="m">1</span>         <span class="m">1</span>       5s
</code></pre></div></li>
</ol>
<br>
<br>
<em>** 이 글은 개인으로서, 개인의 시간을 할애하여 작성된 글입니다. 글의 내용에 오류가 있을 수 있으며, 글 속의 의견은 개인적인 의견입니다. **</em>

 <div class="edit-meta">Last updated on 8 Nov 2021<br></div><nav class="pagination"><a class="nav nav-prev" href="https://thekoguryo.github.io/oci-cloudnative/oke/4.deploy-docker-hub-image-with-lb/" title="1.4 앱 배포 및 Load Balancer 사용하기"><i class="fas fa-arrow-left" aria-hidden="true"></i> Prev - 1.4 앱 배포 및 Load Balancer 사용하기</a>
<a class="nav nav-next" href="https://thekoguryo.github.io/oci-cloudnative/oke/6.persistent-volume/" title="1.6 Persistent Volume 사용하기">Next - 1.6 Persistent Volume 사용하기 <i class="fas fa-arrow-right" aria-hidden="true"></i></a>
</nav><footer><p class="powered">Powered by <a href="https://gohugo.io">Hugo</a>. Theme by <a href="https://github.com/thingsym/hugo-theme-techdoc">TechDoc</a>. Design by <a href="https://www.thingslabo.com/">Thingsym</a>.</p>
</footer>
</main><div class="sidebar">
<nav>
<ul>


<li>
  <form method="get" action="https://thekoguryo.github.io/oci-cloudnative/search">
    <input type="text" id="search-box" name="q" placeholder="Search"/>
  </form>
  
  <script type="text/javascript">
    $(document).ready(function() {
      $('#search-box').val($('#search-query').val());
    });
  </script>
</li>
<li><a> </a></li>



<li class="parent has-sub-menu">
  <a href="https://thekoguryo.github.io/oci-cloudnative/oke/">
    1. OKE(Oracle Container Engine for Kubernetes)
    <button type="button" class="toggleButton">
      <span class="right  hidden">
        <svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right">
          <polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"></polyline>
        </svg></span>
      <span class="down " >
        <svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down">
          <polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"></polyline>
        </svg>
      </span>
    </button>
  </a>
<ul class="sub-menu">
<li class=""><a href="https://thekoguryo.github.io/oci-cloudnative/oke/1.oke/">1.1 OKE(Oracle Container Engine for Kubernetes) 소개</a></li>
<li class=""><a href="https://thekoguryo.github.io/oci-cloudnative/oke/2.install-quick-oke-cluster/">1.2 OKE 클러스터 만들기</a></li>



<li class=" has-sub-menu">
  <a href="https://thekoguryo.github.io/oci-cloudnative/oke/3.access-cluster/">
    1.3 OKE 클러스터 연결하기
    <button type="button" class="toggleButton">
      <span class="right ">
        <svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right">
          <polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"></polyline>
        </svg></span>
      <span class="down  hidden" >
        <svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down">
          <polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"></polyline>
        </svg>
      </span>
    </button>
  </a>
<ul class=" hidden">
<li class=""><a href="https://thekoguryo.github.io/oci-cloudnative/oke/3.access-cluster/1.cloudshell-access/">1.3.1 Cloud Shell로 클러스터 연결하기</a></li>
<li class=""><a href="https://thekoguryo.github.io/oci-cloudnative/oke/3.access-cluster/2.local-access/">1.3.2 로컬 환경에서 클러스터 연결하기</a></li>
</ul>
  
</li>
<li class=""><a href="https://thekoguryo.github.io/oci-cloudnative/oke/4.deploy-docker-hub-image-with-lb/">1.4 앱 배포 및 Load Balancer 사용하기</a></li>
<li class="active"><a href="https://thekoguryo.github.io/oci-cloudnative/oke/5.deploy-ocir-image/">1.5 OCIR 이미지 사용하기</a></li>



<li class=" has-sub-menu">
  <a href="https://thekoguryo.github.io/oci-cloudnative/oke/6.persistent-volume/">
    1.6 Persistent Volume 사용하기
    <button type="button" class="toggleButton">
      <span class="right ">
        <svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right">
          <polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"></polyline>
        </svg></span>
      <span class="down  hidden" >
        <svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down">
          <polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"></polyline>
        </svg>
      </span>
    </button>
  </a>
<ul class=" hidden">
<li class=""><a href="https://thekoguryo.github.io/oci-cloudnative/oke/6.persistent-volume/1.block-volume/">1.6.1 Block Volume 사용하기</a></li>
<li class=""><a href="https://thekoguryo.github.io/oci-cloudnative/oke/6.persistent-volume/2.file-storage/">1.6.2 File Storage 사용하기</a></li>
</ul>
  
</li>
<li class=""><a href="https://thekoguryo.github.io/oci-cloudnative/oke/7.supported-version-and-upgrade/">1.7 Kubernetes 버전 업그레이드</a></li>
<li class=""><a href="https://thekoguryo.github.io/oci-cloudnative/oke/8.monitor-application-log/">1.8 애플리케이션 로그 모니터링</a></li>
</ul>
  
</li>



<li class=" has-sub-menu">
  <a href="https://thekoguryo.github.io/oci-cloudnative/devops/">
    2. DevOps(관리형 CI/CD) 서비스 사용하기
    <button type="button" class="toggleButton">
      <span class="right  hidden">
        <svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right">
          <polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"></polyline>
        </svg></span>
      <span class="down " >
        <svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down">
          <polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"></polyline>
        </svg>
      </span>
    </button>
  </a>
<ul class="">
<li class=""><a href="https://thekoguryo.github.io/oci-cloudnative/devops/1.deploy-app-on-oke-using-devops/">2.1 DevOps 서비스를 이용한 Spring Boot 앱을 OKE에 배포 자동화하기</a></li>
</ul>
  
</li>



<li class=" has-sub-menu">
  <a href="https://thekoguryo.github.io/oci-cloudnative/ocir/">
    3. OCIR(Oracle Cloud Infrastructure Registry) 컨테이너 레지스트리
    <button type="button" class="toggleButton">
      <span class="right  hidden">
        <svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right">
          <polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"></polyline>
        </svg></span>
      <span class="down " >
        <svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down">
          <polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"></polyline>
        </svg>
      </span>
    </button>
  </a>
<ul class="">
<li class=""><a href="https://thekoguryo.github.io/oci-cloudnative/ocir/1.scan-image/">3.1 컨테이너 이미지 스캔</a></li>
<li class=""><a href="https://thekoguryo.github.io/oci-cloudnative/ocir/2.helm-chart/">3.2 Helm Chart Repostory로 사용하기</a></li>
</ul>
  
</li>



<li class=" has-sub-menu">
  <a href="https://thekoguryo.github.io/oci-cloudnative/oss/">
    4. OSS(Open Source Software) 사용하기
    <button type="button" class="toggleButton">
      <span class="right  hidden">
        <svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right">
          <polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"></polyline>
        </svg></span>
      <span class="down " >
        <svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down">
          <polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"></polyline>
        </svg>
      </span>
    </button>
  </a>
<ul class="">



<li class=" has-sub-menu">
  <a href="https://thekoguryo.github.io/oci-cloudnative/oss/ingress-controller/">
    4.1 Ingress Controller
    <button type="button" class="toggleButton">
      <span class="right ">
        <svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right">
          <polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"></polyline>
        </svg></span>
      <span class="down  hidden" >
        <svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down">
          <polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"></polyline>
        </svg>
      </span>
    </button>
  </a>
<ul class=" hidden">
<li class=""><a href="https://thekoguryo.github.io/oci-cloudnative/oss/ingress-controller/1.install-nginx-ingress-controller/">4.1.1 NGINX Ingress Controller 사용하기</a></li>
<li class=""><a href="https://thekoguryo.github.io/oci-cloudnative/oss/ingress-controller/2.nginx-ingress-host/">4.1.2 NGINX Ingress Controller에서 host 기반 라우팅(feat. OCI DNS)</a></li>
<li class=""><a href="https://thekoguryo.github.io/oci-cloudnative/oss/ingress-controller/3.nginx-ingress-tls-termination/">4.1.3 NGINX Ingress Controller에서 TLS termination</a></li>
</ul>
  
</li>



<li class=" has-sub-menu">
  <a href="https://thekoguryo.github.io/oci-cloudnative/oss/logging-efk/">
    4.2 Logging - EFK
    <button type="button" class="toggleButton">
      <span class="right ">
        <svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-right">
          <polyline fill="none" stroke="#000" stroke-width="1.03" points="7 4 13 10 7 16"></polyline>
        </svg></span>
      <span class="down  hidden" >
        <svg width="16" height="16" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" data-svg="chevron-down">
          <polyline fill="none" stroke="#000" stroke-width="1.03" points="16 7 10 13 4 7"></polyline>
        </svg>
      </span>
    </button>
  </a>
<ul class=" hidden">
<li class=""><a href="https://thekoguryo.github.io/oci-cloudnative/oss/logging-efk/1.install-efk/">4.2.1 EFK 설치하기</a></li>
</ul>
  
</li>
</ul>
  
</li>
</ul>
</nav>


<div class="sidebar-footer"></div>
</div>
</div><a href="#" id="backtothetop-fixed" class="backtothetop"
 data-backtothetop-duration="600"
 data-backtothetop-easing="easeOutQuart"
 data-backtothetop-fixed-fadeIn="1000"
 data-backtothetop-fixed-fadeOut="1000"
 data-backtothetop-fixed-bottom="10"
 data-backtothetop-fixed-right="20">
<span class="fa-layers fa-fw">
<i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up"></i>
</span></a>

<script src="https://thekoguryo.github.io/oci-cloudnative/js/copy-code-button.js"></script></div>
</body>
</html>
