<!DOCTYPE html>
<html lang="ko">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Support for service mesh and performance improvements when using the VCN-Native CNI plugin - TheKoguryo&#39;s 기술 블로그</title>
<meta name="generator" content="Hugo 0.139.3">
<link href="https://thekoguryo.github.io/index.xml" rel="alternate" type="application/rss+xml">
<link rel="canonical" href="https://thekoguryo.github.io/release-notes/20230426-support-for-service-mesh-and-performance-improvements-when-using-the-vcn-native-cni-plugin/">
<link rel="stylesheet" href="https://thekoguryo.github.io/css/theme.min.css">
<link rel="stylesheet" href="https://thekoguryo.github.io/css/d2coding.css">
<link rel="stylesheet" href="https://thekoguryo.github.io/css/fontawesome-all.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nanum Gothic" >
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Gowun Dodum" >
<script src="https://use.fontawesome.com/releases/v5.15.4/js/all.js"></script>
<link rel="stylesheet" href="https://thekoguryo.github.io/css/chroma.min.css">
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
<script src="https://thekoguryo.github.io/js/functions.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js"></script>
<script src="https://thekoguryo.github.io/js/jquery.backtothetop/jquery.backtothetop.min.js"></script>
<script src="https://thekoguryo.github.io/js/jqcloud/jqcloud.js"></script>
<link rel="stylesheet" href="https://thekoguryo.github.io/js/jqcloud/jqcloud.css">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-106207316-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-106207316-1');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2708881668962858"
     crossorigin="anonymous"></script><meta property="og:url" content="https://thekoguryo.github.io/release-notes/20230426-support-for-service-mesh-and-performance-improvements-when-using-the-vcn-native-cni-plugin/">
  <meta property="og:site_name" content="TheKoguryo&#39;s 기술 블로그">
  <meta property="og:title" content="Support for service mesh and performance improvements when using the VCN-Native CNI plugin">
  <meta property="og:description" content="OCI VCN-Native Pod Networking CNI을 사용하는 경우, Pod가 VCN의 IP의 할당받아, 해당 IP로 직접 통신할 수 있습니다.">
  <meta property="og:locale" content="ko">
  <meta property="og:type" content="article">
    <meta property="article:section" content="release-notes">
    <meta property="article:published_time" content="2023-04-26T00:00:01+00:00">
    <meta property="article:modified_time" content="2023-04-26T00:00:01+00:00">
    <meta property="article:tag" content="Oke">
    <meta property="article:tag" content="VCN-Native Pod Networking CNI">

</head>
<body>
<div class="container"><header>
<h1>TheKoguryo&#39;s 기술 블로그</h1>

 <span class="version">&nbsp;Version 2025-08-29</span>
<a href="https://github.com/TheKoguryo" class="github"><i class="fab fa-github"></i></a>
</header>
<div class="menu">
<nav>
<ul>
<li ><a href="/">Home</a></li>
<li ><a href="/oci">OCI</a></li>
<li ><a href="/oracle-cloudnative">OKE/Cloud Native</a></li>
<li ><a href="/blog">Blog</a></li>
<li ><a href="/release-notes">OCI Release Notes</a></li>
<li ><a href="/tags">Tag Cloud</a></li>
<li ><a href="https://github.com/TheKoguryo/TheKoguryo.github.io/issues/new">Feedback</a></li>
<li ><a href="/link">Link</a></li>

</ul>
</nav>
</div>
<div class="content-container">
<main><h1 id="support-for-service-mesh-and-performance-improvements-when-using-the-vcn-native-cni-plugin">Support for service mesh and performance improvements when using the VCN-Native CNI plugin</h1>
<ul>
<li><a href="https://docs.oracle.com/en-us/iaas/releasenotes/changes/f3aee1f0-7b8d-4f4b-8e80-df1de188ff9d/">Release Notes - Support for service mesh and performance improvements when using the VCN-Native CNI plugin</a></li>
</ul>
<h2 id="업데이트-사항">업데이트 사항</h2>
<p><a href="../20220712-support-for-vcn-native-pod-networking">Release Notes - Support for VCN-native pod networking</a> 출시 이후 기능이 업데이드되어 VCN-Native Pod Networking CNI 2.0이 출시 되었습니다.</p>
<ul>
<li>
<p>VCN-Native Pod Networking CNI에서 OCI Service Mesh, Istio, Linkerd 같은 Service Mesh 제품을 이제 지원합니다.</p>
<ul>
<li>Worker Node의 이미지를 Oracle Linux 7를 사용해야 합니다. (Oracle Linux 8은 지원 예정)</li>
</ul>
</li>
<li>
<p>VCN-Native Pod Networking CNI 1.0 대비하여 네트워크 성능 향상</p>
</li>
</ul>
<p><em><strong>단, Worker Node의 버전이 Kubernetes 1.26 이상이어야 합니다.</strong></em></p>
<h3 id="vcn-native-cni-20에서-service-mesh-지원">VCN-Native CNI 2.0에서 Service Mesh 지원</h3>
<h3 id="vcn-native-cni-20에서-네트워크-성능-향상">VCN-Native CNI 2.0에서 네트워크 성능 향상</h3>
<p>테스트할 경우의 수가 여러가지 있을 수 있지만, 여기에서는 컨테이너 서비스간의 호출하는 경우에서, 두 컨테이너 Pod가 같은 Worker Node에 있을 때랑 서로 다른 Worker Node 상에 있는 CNI간 성능을 비교해 봅니다.</p>
<h4 id="flannel-cni-사용시">Flannel CNI 사용시</h4>
<ol>
<li>
<p>Flannel CNI를 사용하는 OKE Cluster를 준비합니다.</p>
</li>
<li>
<p>테스트용 nginx 컨테이너를 설치합니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">kubectl create deploy nginx --image<span class="o">=</span>nginx
</span></span><span class="line"><span class="cl">kubectl scale deploy nginx --replicas<span class="o">=</span><span class="m">3</span>
</span></span><span class="line"><span class="cl">kubectl run ol1 --image<span class="o">=</span>oraclelinux:8 --command -- tail -f /dev/null
</span></span></code></pre></div></li>
<li>
<p>설치 결과</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ kubectl get pod -o wide
</span></span><span class="line"><span class="cl">NAME                     READY   STATUS        RESTARTS   AGE   IP             NODE          NOMINATED NODE   READINESS GATES
</span></span><span class="line"><span class="cl">nginx-76d6c9b8c-l4tpk    1/1     Running       <span class="m">0</span>          25s   10.244.1.7     10.0.10.134   &lt;none&gt;           &lt;none&gt;
</span></span><span class="line"><span class="cl">nginx-76d6c9b8c-rvcln    1/1     Running       <span class="m">0</span>          28s   10.244.0.4     10.0.10.52    &lt;none&gt;           &lt;none&gt;
</span></span><span class="line"><span class="cl">nginx-76d6c9b8c-s67x2    1/1     Running       <span class="m">0</span>          25s   10.244.0.134   10.0.10.244   &lt;none&gt;           &lt;none&gt;
</span></span><span class="line"><span class="cl">ol1                      1/1     Running       <span class="m">0</span>          19s   10.244.0.6     10.0.10.52    &lt;none&gt;           &lt;none&gt;
</span></span></code></pre></div></li>
<li>
<p>같은 Worker Node에 있는 Pod간 테스트 - 같은 Node(10.0.10.<em><strong>52</strong></em>)에 있는 Pod(10.244.0.<em><strong>6</strong></em>) -&gt; Pod(10.244.0.<em><strong>4</strong></em>)간 테스트</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ kubectl <span class="nb">exec</span> -it ol1 -- ping -c <span class="m">10</span> 10.244.0.4
</span></span><span class="line"><span class="cl">PING 10.244.0.4 <span class="o">(</span>10.244.0.4<span class="o">)</span> 56<span class="o">(</span>84<span class="o">)</span> bytes of data.
</span></span><span class="line"><span class="cl"><span class="m">64</span> bytes from 10.244.0.4: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">1</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span>0.081 ms
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl"><span class="m">64</span> bytes from 10.244.0.4: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">10</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">64</span> <span class="nv">time</span><span class="o">=</span>0.065 ms
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">--- 10.244.0.4 ping statistics ---
</span></span><span class="line"><span class="cl"><span class="m">10</span> packets transmitted, <span class="m">10</span> received, 0% packet loss, <span class="nb">time</span> 9227ms
</span></span><span class="line"><span class="cl">rtt min/avg/max/mdev <span class="o">=</span> 0.065/0.069/0.081/0.007 ms
</span></span></code></pre></div></li>
<li>
<p>다른 Worker Node에 있는 Pod간 테스트 - Pod(10.244.0.<em><strong>6</strong></em>) on Node(10.0.10.<em><strong>52</strong></em>) -&gt; Pod(10.244.0.<em><strong>134</strong></em>) on Node(10.0.10.<em><strong>244</strong></em>)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ kubectl <span class="nb">exec</span> -it ol1 -- ping -c <span class="m">10</span> 10.244.0.134
</span></span><span class="line"><span class="cl">PING 10.244.0.134 <span class="o">(</span>10.244.0.134<span class="o">)</span> 56<span class="o">(</span>84<span class="o">)</span> bytes of data.
</span></span><span class="line"><span class="cl"><span class="m">64</span> bytes from 10.244.0.134: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">1</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">62</span> <span class="nv">time</span><span class="o">=</span>0.623 ms
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl"><span class="m">64</span> bytes from 10.244.0.134: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">10</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">62</span> <span class="nv">time</span><span class="o">=</span>0.572 ms
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">--- 10.244.0.134 ping statistics ---
</span></span><span class="line"><span class="cl"><span class="m">10</span> packets transmitted, <span class="m">10</span> received, 0% packet loss, <span class="nb">time</span> 9229ms
</span></span><span class="line"><span class="cl">rtt min/avg/max/mdev <span class="o">=</span> 0.461/0.543/0.623/0.052 ms
</span></span></code></pre></div></li>
</ol>
<h4 id="vcn-native-cni-20-사용시">VCN-Native CNI 2.0 사용시</h4>
<ol>
<li>
<p>VCN-Native CNI 2.0 사용하는 OKE Cluster v1.26 버전, Node Pool 이미지 Oracle Linux 7를 준비합니다.</p>
</li>
<li>
<p>테스트용 nginx 컨테이너를 설치합니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">kubectl create deploy nginx --image<span class="o">=</span>nginx
</span></span><span class="line"><span class="cl">kubectl scale deploy nginx --replicas<span class="o">=</span><span class="m">3</span>
</span></span><span class="line"><span class="cl">kubectl run ol1 --image<span class="o">=</span>oraclelinux:8 --command -- tail -f /dev/null
</span></span></code></pre></div></li>
<li>
<p>설치 결과</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ kubectl get pod -o wide
</span></span><span class="line"><span class="cl">NAME                     READY   STATUS    RESTARTS   AGE    IP            NODE          NOMINATED NODE   READINESS GATES
</span></span><span class="line"><span class="cl">nginx-748c667d99-cddnv   1/1     Running   <span class="m">0</span>          68m    10.0.40.26    10.0.10.213   &lt;none&gt;           &lt;none&gt;
</span></span><span class="line"><span class="cl">nginx-748c667d99-prmcb   1/1     Running   <span class="m">0</span>          68m    10.0.40.152   10.0.10.93    &lt;none&gt;           &lt;none&gt;
</span></span><span class="line"><span class="cl">nginx-748c667d99-rf47h   1/1     Running   <span class="m">0</span>          68m    10.0.40.207   10.0.10.156   &lt;none&gt;           &lt;none&gt;
</span></span><span class="line"><span class="cl">ol1                      1/1     Running   <span class="m">0</span>          36m    10.0.40.227   10.0.10.93    &lt;none&gt;           &lt;none&gt;
</span></span></code></pre></div></li>
<li>
<p>같은 Worker Node에 있는 Pod간 테스트 - 같은 Node(10.0.10.<em><strong>93</strong></em>)에 있는 Pod(10.0.40.<em><strong>227</strong></em>) -&gt; Pod(10.0.40.<em><strong>152</strong></em>)간 테스트</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ kubectl <span class="nb">exec</span> -it ol1 -- ping -c <span class="m">10</span> 10.0.40.152
</span></span><span class="line"><span class="cl">PING 10.0.40.152 <span class="o">(</span>10.0.40.152<span class="o">)</span> 56<span class="o">(</span>84<span class="o">)</span> bytes of data.
</span></span><span class="line"><span class="cl"><span class="m">64</span> bytes from 10.0.40.152: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">1</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">63</span> <span class="nv">time</span><span class="o">=</span>0.084 ms
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl"><span class="m">64</span> bytes from 10.0.40.152: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">10</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">63</span> <span class="nv">time</span><span class="o">=</span>0.057 ms
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">--- 10.0.40.152 ping statistics ---
</span></span><span class="line"><span class="cl"><span class="m">10</span> packets transmitted, <span class="m">10</span> received, 0% packet loss, <span class="nb">time</span> 9241ms
</span></span><span class="line"><span class="cl">rtt min/avg/max/mdev <span class="o">=</span> 0.039/0.060/0.084/0.014 ms
</span></span></code></pre></div></li>
<li>
<p>다른 Worker Node에 있는 Pod간 테스트 - Pod(10.0.40.<em><strong>227</strong></em>) on Node(10.0.10.<em><strong>93</strong></em>) -&gt; Pod(10.0.40.<em><strong>207</strong></em>) on Node(10.0.10.<em><strong>156</strong></em>)</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ kubectl <span class="nb">exec</span> -it ol1 -- ping -c <span class="m">10</span> 10.0.40.207
</span></span><span class="line"><span class="cl">PING 10.0.40.207 <span class="o">(</span>10.0.40.207<span class="o">)</span> 56<span class="o">(</span>84<span class="o">)</span> bytes of data.
</span></span><span class="line"><span class="cl"><span class="m">64</span> bytes from 10.0.40.207: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">1</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">62</span> <span class="nv">time</span><span class="o">=</span>0.355 ms
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl"><span class="m">64</span> bytes from 10.0.40.207: <span class="nv">icmp_seq</span><span class="o">=</span><span class="m">10</span> <span class="nv">ttl</span><span class="o">=</span><span class="m">62</span> <span class="nv">time</span><span class="o">=</span>0.351 ms
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">--- 10.0.40.207 ping statistics ---
</span></span><span class="line"><span class="cl"><span class="m">10</span> packets transmitted, <span class="m">10</span> received, 0% packet loss, <span class="nb">time</span> 9247ms
</span></span><span class="line"><span class="cl">rtt min/avg/max/mdev <span class="o">=</span> 0.304/0.352/0.373/0.028 ms
</span></span></code></pre></div></li>
<li>
<p>테스트 결과 - 10번 단순 테스트라 절대적인 성능 결과가 아닌 참고치로 보시기 바랍니다.</p>
<table>
  <thead>
      <tr>
          <th style="text-align: center"></th>
          <th style="text-align: center">Flannel CNI</th>
          <th style="text-align: center">VCN-Native 2.0 CNI</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center">같은 Worker Node에 있는 Pod간 평균 Ping 속도</td>
          <td style="text-align: center">0.069 ms</td>
          <td style="text-align: center">0.060 ms</td>
      </tr>
      <tr>
          <td style="text-align: center">다른 Worker Node에 있는 Pod간 평균 Ping 속도</td>
          <td style="text-align: center">0.543 ms</td>
          <td style="text-align: center">0.352 ms</td>
      </tr>
  </tbody>
</table>
</li>
</ol>
<br>
<br>
<div class="panel panel-caution">
    <div class="panel-body" style="text-align: center;">
    <p>이 글은 개인으로서, 개인의 시간을 할애하여 작성된 글입니다. 글의 내용에 오류가 있을 수 있으며, 글 속의 의견은 개인적인 의견입니다.</p>
    </div>
    </div>

 <footer><p class="powered">Powered by <a href="https://gohugo.io">Hugo</a>. Theme by <a href="https://github.com/thingsym/hugo-theme-techdoc">TechDoc</a>. Design by <a href="https://www.thingslabo.com/">Thingsym</a>.</p>
</footer>
</main><div class="sidebar">


<nav>
<ul>


<li>
  <form method="get" action="https://thekoguryo.github.io//search">
    <input type="text" id="search-box" name="q" placeholder="Search"/>
  </form>
  
  <script type="text/javascript">
    $(document).ready(function() {
      $('#search-box').val($('#search-query').val());
    });
  </script>
</li>
<li><a> </a></li>

    
    

      
        

    
    

    
    

    
    

    
    

    
    
</ul>
</nav>


<div class="sidebar-footer"></div>
</div>
</div><a href="#" id="backtothetop-fixed" class="backtothetop" 
 data-backtothetop-duration="600"
 data-backtothetop-easing="easeOutQuart"
 data-backtothetop-fixed-fadeIn="1000"
 data-backtothetop-fixed-fadeOut="1000"
 data-backtothetop-fixed-bottom="10"
 data-backtothetop-fixed-right="20">
<span class="fa-layers fa-fw">
<i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up" style="color: #74A683;"></i>
</span></a>

<script src="https://thekoguryo.github.io/js/copy-code-button.js"></script></div>
</body>
</html>
